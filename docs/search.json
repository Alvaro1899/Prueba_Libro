[{"path":"index.html","id":"prólogo","chapter":"Prólogo","heading":"Prólogo","text":"Las ciencias regionales son ya una disciplina menor, pasaron de ser una suerte de espacio para la experimentación de teorías y métodos que tenían cabida en las corrientes principales de los cuerpos científicos plenamente reconocidos y se han se han ido abriendo paso y consolidando como una disciplina totalmente reconocida. Las ciencias regionales han ido adquiriendo “una amplia orientación multidisciplinaria sobre temas regionales y urbanos, combinando y siendo un complemento la economía regional, geografía social y económica, economía urbana, ciencia del transporte, ciencia ambiental, ciencia política y teoría de la planificación” (Fischer y Nijkamp 2014). La realidad es que en los pasados 50 años las ciencias regionales han evolucionado como un campo de investigación en pleno derecho, esto tras un largo recorrido desde los inicios de la economía como ciencia, comenzando con los trabajos de Adam Smith que trataban algunos elementos relacionados con la localización de actividades comerciales, pasando por los estudios clásicos de Von Thünen, . Weber, . Lösch (todos ellos relacionados con la denominada teoría de la localización), hasta llegar la consolidación de las ciencias regionales como disciplina gracias al impulso de Walter Isaard que trata de brindar una perspectiva teórica y metodológica coherente con un fuerte soporte empírico desde una perspectiva multidisciplinaria. Las contribuciones de W. Isaard abarcan una multitud de campos tales como la ecología, el estudio de los transportes e incluso el manejo de conflictos sociales.Si bien las ciencias regionales abarcan múltiples líneas temáticas, hay dos de ellas que se constituyen en tópicos clásicos y son lo que podría ser denominado la corriente principal de las ciencias regionales: el estudio de las fuerzas de aglomeración y los determinantes de la localización de la actividad. Buena parte de las investigaciones de estos ejes buscan responder preguntas como ¿por qué las actividades económicas se distribuyen de forma homogénea en el espacio?, o bien, ¿qué hace que determinadas actividades se localicen en unos sitios y en otros?En su Handbook Regional Science, Manfred Fischer y Peter Nijkamp señalan que quizá sean dos los elementos clave que constituyen la ciencia regional: un enfoque multidisciplinario y un fuerte análisis cuantitativo. Respecto al primer elemento, si bien es cierto que la economía espacial, urbana y regional, han representado pasos alentadores hacia la aproximación del economista con otros científicos sociales, aquellos suelen mirar hacia otras disciplinas con la frecuencia que exigen las problemáticas sociales. De este modo, aún sigue siendo necesario construir alternativas de formación en la fase final de los estudios de licenciatura que busquen romper la endogamia de la profesión. Esto es en alguna medida lo que en el Área de Concentración de Economía de la Innovación: empresas, redes y territorio, que forma parte de la última fase de estudios en la licenciatura en Economía de la Universidad Autónoma Metropolitana Unidad Azcapotzalco en la Ciudad de México, México, se ha buscado impulsar.En tanto, sobre el enfoque cuantitativo que caracteriza las ciencias regionales, es cierto que en todos los planes de estudio de economía encontramos un sólido repertorio de instrumentos de carácter cuantitativo: matemáticas, estadística y, por supuesto, econometría. obstante, las herramientas requeridas para el análisis de la realidad desde una perspectiva espacial siguen siendo escasas dentro de la formación nivel de licenciatura. Estas notas buscan ser una contribución, por mínima que esta sea, para subsanar dicha situación.Este trabajo está, por tanto, fundamentalmente dirigido los estudiantes de licenciatura interesados en el desarrollo de habilidades técnicas para el análisis cuantitativo que exigen las ciencias regionales y el enfoque espacial de la economía. Así pues, el objetivo de estas notas es guiar al estudiante, desde un enfoque fundamentalmente práctico, en el conocimiento y manejo de técnicas para la exploración, análisis y modelado de información espacial mediante el uso de R, un programa informático y lenguaje de programación enfocado en el análisis estadístico y visualización de información y RStudio un entorno de desarrollo integrado (IDE) desde donde se puede interactuar con R más eficientemente.Este libro se estructura en este momento, enero de 2022, en 5 capítulos, aunque buscamos integrar uno más antes de que finalice el año. En el capítulo 1 se presentan los elementos básicos de R y RStudio través de la utilización del enfoque del análisis exploratorio de datos, es decir, introducimos de lleno al estudiante en el uso del software para plantear y resolver preguntas relativas la estructura de la información utilizada través de diversas herramientas de visualización y manipulación de la información. En el capítulo 2 se muestra cómo elaborar diversos tipos de mapas coropléticos y la enorme flexibilidad de personalización de estilos que tiene R para tal efecto. En el capítulo 3 se presentan las herramientas para llevar cabo un análisis exploratorio de datos espaciales donde el estudiante encontrará la manera de definir las interrelaciones que se dan en el espacio través de la construcción de matrices de pesos espaciales y aprenderá sobre la autocorrelación espacial y sus implicaciones en el análisis de la información. En tanto, en el capítulo 4, se presenta un repaso muy sintético de los modelos de regresión simple enfatizando el problema de la autocorrelación que se puede presentar cuando se estima un modelo lineal con datos espaciales. Finalmente, en el capítulo 5, mostramos algunas de las diferentes alternativas de modelación econométrica espacial disponibles en R.Todos los ejercicios que se desarrollan en esta versión del libro corresponden la realidad económica y social de la Zona Metropolitana del Valle de México y están disponibles para que el estudiante y lector puedan replicar todos los resultados aquí ilustrados. Así, el lector es guiado través de la exploración de la información epidemiológica relacionada con la primera ola de la pandemia por COVID19 en relación con los factores sociodemográficos y económicos de la zona metropolitana más grande de nuestro país.Finalmente, es necesario mencionar que este material es más que un esfuerzo de recopilación, sistematización y aplicación que se ha hecho partir de infinidad de materiales que la activa comunidad de R, interesada en el análisis espacial en México y el mundo, comparte desinteresadamente través de internet. Creemos que así debería ser siempre el conocimiento: libre y abierto como el software que es usado aquí. Así pues, si algún mérito tiene este material es justamente su sentido didáctico que confiamos permita contribuir la formación de profesionales interesandos en las ciencias regionales y en la mejora de las condiciones de vida de las mayorías.","code":""},{"path":"r-una-introducción-desde-la-exploración-de-información.html","id":"r-una-introducción-desde-la-exploración-de-información","chapter":"1 R: Una introducción desde la exploración de información","heading":"1 R: Una introducción desde la exploración de información","text":"R es un lenguaje de programación orientado objetos, libre y de código abierto y además un ambiente enfocado al análisis estadístico y gráfico. Que sea libre significa, diferencia de otros programas, que cualquier persona puede usarlo, redistribuirlo o modificarlo, sin necesidad de contar con una licencia pago.R es un entorno de software libre para computación estadística y gráficos. Compila y se ejecuta en una amplia variedad de plataformas UNIX, Windows y MacOS. Fuente:  http://cran.r-project.orgUsar R en lugar de otras plataformas que requieren licencia pago es recomendable al menos por tres razones:Es libre: en contraste con otros populares programas informáticos como lo es STATA, del que una licencia sencilla ronda los 100 dólares por año.R es sólo un software, también es un lenguaje de programación; así, al aprenderlo se obtiene un resultado doble. De modo que cuando llegues manejarlo con profundidad, puedes crear tus propias librerías. sólo sirve para hacer análisis gráfico y estadístico, con el puedes hacer páginas web, ser usado como Sistema de Información Geográfica e incluso para escribir libros, como éste que ahora estas leyendo.Es un lenguaje con un amplio soporte, es decir, con multitud de guías y materiales para el autoaprendizaje.lo largo de este libro usaremos R través de RStudio, un entorno de desarrollo integrado o IDE por sus siglas en inglés. Así que, lo primero será descargar e instalar R y luego descargar e instalar RStudio.R puede ser descargado de aquí. Al seleccionar “download R” hay que elegir cualquier CRAN Mirror (del inglés Comprehensive R Archive Network que son repositorios que contienen una copia del código base de R y sus paquetes). México tiene dos, puedes elegir cualquiera.En tanto, R Studio puede ser desargado de aquí. Ve la sección “Download” en la parte superior y elije la versión gratuita. El navegador debería seleccionar la versión adecuada para tu equipo, sino es así, selecciona del listado que aparece en la parte inferior. También puedes consultar este video para seguir paso paso la instalación de ambos programas.Al abrir RStudio se mostrará una pantalla como la que aparece en la figura 1.1. La pantalla principal de RStudio está dividida en cuatro partes. En caso de que el recuadro superior izquierdo aparezca, da clic en el ícono de la hoja en blanco con el signo de más (New file, parte superior izquierda de la pantalla) para que se despliegue.\nFigura 1.1: Panel principal\nLas citadas cuatro secciones son:Fuente u origen (source): esta sección, zona superior izquierda, aparecerá una vez que des clic en New script. Aquí podrás escribir las líneas de código de tu proyecto y guardarlas para consultarlas cuando lo desees, visualizarás tus bases de datos organizadas en pestañas y varios otros elementos.Consola: localizada en la parte inferior izquierda, es donde aparece el puntero o prompt (>); este es el espacio en el que se insertarán o escribirán las líneas de código para ser ejecutadas por R y en donde se mostrarán parte de los resultados. Cuando el prompt aparezca, R está listo para recibir tus instrucciones.Archivo: en el espacio inferior derecho aparecen una serie de pestañas que muestran las carpetas y archivos de tu equipo, las gráficas realizadas y los paquetes disponibles, así como la ayuda de R y de sus paquetes.Ambiente: por último el área superior derecha, mostrará las variables creadas, bases de datos cargadas y todos los objetos activos en la sesión de R. Esta sección contiene otras dos pestañas: historial y conexiones. La primera ofrece una memoria de todas las instrucciones escritas en la consola, en tanto, la segunda le será útil cuando haga trabajo colaborativo través de, por ejemplo, GitHub.Los programas informáticos están construidos partir de código, éste puede ser entendido como un lenguaje partir del cual se dan las instrucciones la computadora para que realice alguna acción. Como en todo lenguaje, un aspecto sustantivo es la sintaxis y la ortografía, es decir, el orden y la corrección en la forma en que uno se comunica con el sistema de cómputo, de modo que si se escribe alguna instrucción de forma incorrecta o incompleta (faltas de ortografía o errores de sintaxis) la instrucción se ejecutará.En este sentido, se debe señalar que R es sensible al uso de mayúsculas y minúsculas, esto quiere decir para nuestro programa es lo mismo Árbol y árbol. Además, en este programa constantemente estará usando paréntesis y comas en las instrucciones, por lo que hay que poner especial atención para olvidar colocar alguno de ellos en la sentencia escrita. Otro elemento importante son las llamadas “palabras clave”, Keywords. Éstas son palabras reservadas, es decir, palabras con un significado especial para R y que hacen referencia instrucciones que pertenecen la estructura base del programa R por lo que está recomendado su uso. Algunos ejemplos de palabras reservadas son son: , else, break. Además, el nombre de las variables debe comenzar con caracteres especiales (&,#,$,%) o números.Si bien R es tremendamente potente, puede incluso utilizarse como simple calculadora. Los operadores matemáticos que pueden emplearse en R se muestran en la figura 1.2:\nFigura 1.2: Operadores\nDe esta forma sí colocas en la consola el número 5 seguido del signo aritmético correspondiente, por ejemplo un signo de más, +, y luego otro número, R devolverá el resultado de la operación:En R, todos los elementos con los que se interactúa son denominados objetos (por eso se dice que es un lenguaje de programación orientado objetos), los hay de distintas clases y cada clase se puede identificar por un nombre. Los objetos más comunes en R son: constantes, variables, vectores, listas, matrices y arreglos de datos (data frames). Éstos últimos los hay en diferentes versiones dependiendo de algunas de sus características.Los objetos pueden contener diferentes tipos de información como: números enteros (integer), valores numéricos (numeric), números complejos (complex) o valores lógicos (logic) y de cadena/texto (character). Distinguir entre los tipos de información que contiene cada objeto es importante para conocer las operaciones que se pueden hacer entre ellos. Por ejemplo, es posible hacer operaciones matemáticas con variables tipo character ya que tiene sentido sumar aritméticamente “casa” y “azul”, pero sí es posible concatenarlos.Para crear objetos, en R se utiliza el singo “menor que” seguido de un guion para formar una suerte de flecha que apunta la izquierda, <-, éste singo es llamado operador de asignación y precisamente asigna contenido objetos, es decir, con el operador <- creamos un objeto que tendrá determinado contenido. Ve la sección consola de tu entorno de trabajo e ingresa las siguientes líneas de instrucciones (o simplemente da click en el ícono de copiar que aparece en la esquina superior derecha del cuadro que contiene el código):Tras haber escrito estas líneas de código notarás que en la sección superior derecha de RStudio aparecen, en la pestaña de ambiente, los tres objetos creados, cada uno con un nombre y contenido diferente entre ellos: x es un objeto numérico, y es una cadena de texto o carácter y z contiene un valor lógico. Basta con escribir el nombre del objeto en la consola para ver su contenido.Ahora, vuelve crear un objeto de nombre x que contenga el resultado de la suma de 5+10:Como es posible identificar, si en una sesión de R se utiliza dos veces el mismo nombre para una variable, se sobrescribe la información asignada esa variable, es decir, sólo permanece el último valor asignado: x ya contiene la primera asignación, 3, solamente la última, 15.Hay dos funciones muy útiles para conocer el tipo de objeto que tenemos en nuestro entorno de trabajo: La función class() y la función str(). La primera indica el tipo de objeto, en tanto, la segunda nos dice el tipo de objeto y su valor. En el siguiente ejemplo puedes ver que el objeto y es de tipo carácter y su contenido es la expresión “Hello World”.Los vectores son una forma de almacenar más de un elemento en un objeto y dichos elementos tienen que ser necesariamente del mismo tipo, aunque es importante tener en cuenta que es recomendable combinar diferentes tipos de objetos porque se pueden alterar las clases de cada uno de los elementos originales. Cuando se quiere crear un vector que contiene cadenas de texto, cada cadena (palabra u oración) se debe poner entre comillas, como se ilustra continuación:El uso de vectores es útil para modificar las etiquetas de una gráfica o bien los encabezados de una tabla, ya que R tomará los valores de texto almacenados en el vector para utilizarlos en la forma deseada. Aquí se muestran otros tipos de objetos en un vector:Imagina que deseas crear un vector numérico con una secuencia numérica del 1 al 10. Para hacerlo, deberías proceder como:Es decir, fue necesario insertar en el vector cada uno de los 10 números, sino que la secuencia continua (del 1 al 10) se señaló con los dos puntos.Las matrices son un tipo de objeto que se distingue porque entre sus propiedades está el de tener dimensión (filas y columnas). Se puede generar una matriz en R con la función matrix() y se procede como:Las funciones, tanto las previamente citadas como esta, requieren que el usuario indique argumentos que son los elementos que aparecen entre paréntesis. La función matrix() requirió indicar varios: los datos que forman el contenido que tendrá la matriz,data=, el número de filas , nrow= y el número de columnas, ncol=. Recuerda: toda función requiere especificar determinados argumentos para que pueda funcionar.Alternativamente se pueden construir matrices partir de vectores. Para ello, se pueden usar las funciones cbind() y rbind(). Primero creamos dos vectores, x y y:La función cbind() permite “unir por columna” (column bind) y rbind() que “une por fila” (row bind). Así, con los vectores previamente construidos podemos tener dos matrices diferentes, esto dependerá si las unimos por fila:o columna:Son un tipo especial de vectores y son utilizados para representar información categórica, lo que permite organizarla en niveles para analizarla mejor:Por ejemplo, cuando una variable contiene información sobre el sexo de un individuo es recomendable que en lugar de designar cada caso como 1 y 2 respectivamente, se usen variables categóricas como “masculino” y “femenido”, es decir, es recomendable almacenar la información como factor.Esta estructura de datos es la más usada para realizar análisis en R. Son estructuras de datos de dos dimensiones, es decir, están compuestas por filas y columnas. Los renglones de un data frame admiten datos de distintos tipos, pero sus columnas tienen la restricción de contener datos sólo de un tipo. Para comprender mejor esto piensa en un data frame como si de una hoja de cálculo se tratara: los renglones representan casos, individuos u observaciones, mientras que las columnas representan atributos, rasgos o variables. Una columna con la variable “ingreso” deberá ser del mismo tipo para todos los casos, por ejemplo un valor numérico, en tanto, para el caso o individuo 1 (fila 1) tendremos información relativa sólo al ingreso, sino al sexo, estatura y edad, es decir, variables categóricas, numéricas y enteros, respectivamente.Cuando arribemos un poco más adelante al proceso de importación de información al entorno de trabajo se presentará cómo luce un arreglo de datos de estas características.Se dijo que R es un programa especializado en el análisis estadístico y la representación gráfica, pero R sólo se limita lo que ofrece cuando lo descarga por primera vez. Uno de los elementos que hace de R una potente herramienta es la posibilidad de ampliar su potencial través de la instalación de paquetes que expanden sus funciones básicas. Existen paquetes de R para múltiples campos disciplinares y especialidades, por ejemplo estas notas se sirven de los paquetes especializados en el análisis espacial, como se observará en los capítulos subsecuentes. De momento mencionemos sólo un par:tmap: ofrece un enfoque flexible, basado en capas y fácil de usar para crear mapas temáticos.spatialreg: paquete para la elaboración de regresiones con componentes espaciales.Para poder hacer uso de los paquetes que amplían el potencial de R es necesario descargarlos, instalarlos y, en cada sesión de trabajo, llamarlos. Para la descarga e instalación podemos ir Archivo (File) en la cinta de menú que se localiza en la parte superior de tu entorno de trabajo y seleccionar tools/install package. continuación, deberás colocar el nombre del paquete deseado y dar click en instalar. O bien, alternativamente, puedes ir la sección de Archivo, en la zona inferior derecha, seleccionar la pestaña Packages y continuación el ícono de Install. Una tercera manera de instalar paquetes es desde la consola (sección inferior izquierda), para instalar un paquete la vez:O bien, varios paquetes la vez:Tras el proceso de instalación, en tu consola, R informará sobre el resultado de la instalación y te ofrecerá algunos datos sobre la ubicación del paquete en tu equipo. Para poder hacer uso de los paquetes basta con descargarlos e instalarlos, es necesario “llamarlos” en cada sesión de trabajo de R para ser utilizados. Para ello deberás usar la función library() y como argumento el nombre del paquete:Cada uno de los paquetes y funciones de R está acompañado por materiales de referencia que explican con detalle su uso, así como los diferentes argumentos en el caso de las funciones. Para solicitar ayuda en R puedes recurrir la función help() e indicar como argumento el nombre de la función:Alternativamente, para solicitar ayuda puedes escribir dos signos de interrogación y el nombre del paquete o función:También puedes buscar ayuda de una función específica, por ejemplo, de las funciones para crear una matriz (matrix())o para calcular una media (mean()):En la cinta de menú, en la sección ayuda, Help, encontrarás una serie de materiales muy útiles para familiarizarse con los paquetes instalados. Estos materiales reciben el nombre de “hojas de trucos”, Cheatsheet. Se recomienda ampliamente revisar cada uno de ellos. Además, R es un programa con un sin número de entusiastas usuarios y con un amplio soporte técnico por lo que cuando te encuentres con una dificultad para usar algún paquete o función puedes remitite al sitio de Ayuda del R, o bien, alguno de los repositorios especializados para presentar y resolver dudas como Stackoverflow. Para ilustrar esto, ingresa al sitio de Stackoverflow y coloca en la búsqueda “histograma en R”.En R hay algunas bases de datos que acompañan los paquetes que han sido instalados y sirven para ilustrar su funcionamiento. Las bases precargadas se pueden observar con la siguiente función:Verás una nueva pestaña en la sección de Fuente con el nombre de las bases y una breve descripción. Para cargar alguna de ellas basta introducir su nombre como argumento de la función data(), por ejemplo:tidyverse es un conjunto de paquetes diseñados especialmente para la Ciencia de Datos. Algunos de los paquetes de la familia tidyverse que usaremos aquí y un poco más adelante son:\n* ggplot2: es un sistema para crear gráficos basado en la llamada gramática de las gráficas.\n* dplyr: proporciona una serie de funciones para manipulación de datos. * readr: permite leer datos rectangualres provenientes de múltiples formatos.Como más adelante usaremos otros de los paquetes de la familia tidyverse instalaremos todos en este momento:Si deseas aprender cómo usar con detalle los paquetes de la familia tidyverse y elementos básicos de Ciencia de Datos, el libro de Hadley Wickham y Garrett Grolemund, R Data Science es una magnífica opción.Utilizando el paquete readxl de la familia tidyverse es posible cargar una base de datos en el formato de la popular hoja de cálculo de Microsoft Office. partir de aquí introduciremos una notación particular al usar una función en R, lo que te permitirá recordar qué paquete pertenece dicha función. La notación es: “paquete :: función()”, es decir, primero se colocará el nombre del paquete y, separado por dos pares de dos puntos, en el nombre de la función que pertenece dicho paquete (resulta claro que los paquetes están entonces integrados por múltiples funciones).Sigamos los siguientes pasos para cargar la base de datos covid_zmvm.xlsx que contiene información de los casos positivos y defunciones por COVID19 en los municipios de la Zona Metropolitana del Valle de México durante la primera ola de la pandemia, entre marzo septiembre de 2020, así como múltiples variables sociodemográficas y económicas.Llamemos específicamente al paquete que nos interesa:La función para cargar un libro de Excel es read_excel() y el argumento indispensable es la ruta o directorio donde está almacenado nuestro libro, el nombre y extensión del mismo, path. Creemos pues el objeto covid_zmvm:Para que puedas cargar satisfactoriamente la base, deberás sustituir la ruta por el directorio en el que está almacenado el archivo en tu equipo de cómputo. Una función útil para generar la cadena de texto de la ruta es file.choose(), del paquete base de R. Lleva la consola el código:y presiona enter, verás que aparece un cuadro de diálogo en el que deberás seleccionar el archivo deseado y luego pulsar “abrir”. El resultado aparecerá en tu consola como una cadena de texto entre comillas. Usa esa información para leer la base covid_zmvm.Revisa la ayuda de la función read_excel() para comprender todos los argumentos con los que puede operar la función y que te permitirán personalizar la carga de la base de datos en caso de que tengas múltiples hojas en el libro de Excel o desees rangos personalizados para importar.Ejercicio¿Quién es el autor o autora del paquete readxl?¿Quién es el autor o autora del paquete readxl?Descarga la hoja de trucos del paquete desde el sitio de tidyverse y responde, ¿el paquete sirve sólo para cargar información o es posible escribir y almacenar bases de datos con él?Descarga la hoja de trucos del paquete desde el sitio de tidyverse y responde, ¿el paquete sirve sólo para cargar información o es posible escribir y almacenar bases de datos con él?Alternativamente, es posible que la base que deseemos cargar se encuentre en un formato diferente, por ejemplo, una base de datos con valores separados por comas (coma separate values, CSV). Para cargar una base en dicho formato, usaremos el paquete readr, que forma parte del paquete utilsLlama el paquete tu entorno de trabajo:Con la función anterior, file.choose() obtendremos la cadena de texto que indica la ruta del archivo cargar:Y, finalmente, cargamos la información con la función read.csv()Otra manera de cargar archivos de Excel o de texto (formato CSV) es ubicarnos en la sección de ambiente, ventana superior derecha, y seleccionar el ícono Import Dataset. Se desplegará un menú donde habremos de elegir el tipo de archivo que se desee importar. R sólo permite importar archivos de texto o Excel, también bases de SPSS o STATA. Siguiendo con la ilustración relativa libros de Excel, en la ventana que se despliega, habremos de señalar la ruta exacta o directorio donde está nuestro archivo, incluyendo el nombre y extensión de éste. Al pulsar en el botón actulizar (Update) se desplegara una vista previa de la base. Si aparece de forma correcta, seleccionaremos importar (Import), en caso contrario, se deberá modificar las opciones de importación. Después de seleccionar Import Dataset/Excel y elegir la ubicación del archivo que deseas importar, deberías ver en tu pantalla una imagen como la de la figura 1.3:\nFigura 1.3: Importar datos de excel\nAhora que revisado algunas de las diversas maneras de cargar tu información al entorno de trabajo en R, es momento de comenzar analizarla. Si importaste la base de datos través de la función readxl::read_excel() notarás que el nuestra base covid_zmvm un objeto de tipo tbl_df que es un subtipo de data.frame o arreglo de datos Como el que se mencionó en antes.Las siguientes instrucciones nos ayudarán conocer los nombres de las columnas, la estructura de los datos y la dimensión de la base:Recuerda la notación que mencionamos antes, “paquete::función”; además, si el paquete está cargado, es necesario especificar su nombre al usar la función; al arrancar cada sesión de R, un conjunto de paquetes se cargan de forma automática, dichos paquetes aparecen marcados con una palomita, \\(\\checkmark\\), en la pestaña Packages en la sección de archivo.Ahora bien, si deseas ver la base completa puedes llamarla una nueva pestaña que se visualizará en la sección de fuente. Usa la siguiente instrucción:Alternativamente, puedes llamar la base para que aparezca en la consola, lo que siempre es recomendable si la base es muy grande.En su lugar, podrías preferir ver en la consola sólo los últimos y primeros casos:¿Qué tan grande es la base de datos? Si bien ya la función str() nos brindó información sobre la estructura de la base, puedes conocer el número de filas y columnas que componen tu arreglo de datos con las siguientes funciones:Conviene que se revise el archivo en formato txt que acompaña nuestra base y que opera modo de diccionario para que conocer el significado de cada una de las variables que componen nuestro archivo.Plantemos pues algunas preguntas y busquemos responderlas través de un análisis gráfico:¿Habrá alguna relación entre el número de casos positivos por cada mil habitantes, pos_hab, o muertes por cada mil habitantes, def_hab, con el nivel de estudios promedio de la población por municipio?Si esta relación existe, ¿es más intensa entre las muertes o los casos positivos?Para responder esta pregunta podemos recurrir la construcción de diagramas de dispersión. La elaboración de gráficas dentro de tidyverse corre cargo del paquete ggplot2, una potente librería para la representación visual de información. Este paquete se basa en lo que se denomina “gramática de gráficas” que es otra cosa que un conjunto de reglas coherentes con base en las cuales se elaboran los gráficos (Wickham y Grolemund (2016)).La construcción de gráficas con ggplot2 se hace partir de una suerte de “capas” o “enunciados”. Cada enunciado constituye una parte de la gráfica. Según la hoja de trucos del paquete (que puedes consultar desde la barra de menú en la opción Help/CheatSheet):ggplot2 se basa en la gramática de los gráficos, la idea de que puedes construir cada gráfico partir de los mismos componentes: un conjunto de datos, un sistema de coordenadas y “geoms”, es decir, marcas visuales que representan puntos de datos.Asi pues, se requieren tres elementos para la construcción de una gráfica con ggplot2: datos, geometría y sistema de coordenadas. Dentro de la geometría se especifican sólo la o las variables representar, también algunos elementos estéticos como colores. En nuestro caso, la información está contenida en la base covid_zmvm pero habrá que especificar qué tipo de gráfica deseamos y sus elementos estéticos. Veamos esto en acción:Tenemos pues dos enunciados o “capas”. La primera corresponde la función ggplot() donde colocamos (casi siempre) el primer elemento requerido: la base de datos de donde tomaremos la o las variables graficar, en tanto, el segundo enunciado corresponde la geometría, geom_ cuya parte después del guion bajo se modificará en función del tipo de gráfica utilizar. Algunos (sólo algunos) tipos de gráficas y su función de geometría asociada en ggplot2 aparecen en el cuadro 1.1:Cuadro 1.1Por favor, revisa la hoja de trucos del paquete para que te familiarices con las otras tantas geometrías y su uso, pues cada geometría requiere diferentes argumentos y admite varias posibles configuraciones. En general, dentro de la función de geometría, geom_, será necesario especificar los elementos estéticos, aes(), entre los que se cuenta la o las variables graficar y cómo serán representadas.Añadamos una “capa” adicional nuestra gráfica, combinando otra geometría como una línea de ajuste (pongamos atención en el uso del signo de más):Puedes ver cómo, al añadir una nueva geometría, fue necesario especificar los elementos estéticos del caso, pero los tres enunciados nos permiten tener una sola gráfica. Observa cómo R en tu consola R indica que estás usando determinado método de suavizamiento, el llamado “loess” que significa locally estimated scatterplot smoothing, por tanto, es fácil deducir que debe haber otros métodos de suavizamiento. Observa las siguientes líneas de código:Aquí, hemos añadido un argumento adicional, method=, para indicar un suavizamiento dado por un modelo lineal, lm, de linear model. Tenemos pues que entre el número de casos positivos y el número promedio de grados cursados hay una aparente relación positiva. ¿Qué hay para el caso de las defunciones:Si bien hay un poco más de dispersión, la aparente relación positiva se mantiene. ¿Qué crees que explique esta asociación? ¿Las personas con más años estudiados son susceptibles de contagiarse más fácil de COVID19? ¿O quizá se relacionará más con las diferencias que nivel territorial se dan entre los niveles de estudio de la población en el Valle de México?EjercicioElabora algunas gráficas de dispersión para responder las siguientes preguntas:¿Qué tipo de asociación lineal hay entre los casos positivos y defunciones por COVID19 con las características de la población según el número de dormitorios de las casas, el número de personas que habitan en cada casa y la densidad de población?¿Qué tipo de asociación lineal hay entre los casos positivos y defunciones por COVID19 con las características de la población según el número de dormitorios de las casas, el número de personas que habitan en cada casa y la densidad de población?¿Encuentras algún tipo de asociación entre las variables COVID19 y las características económicas de los municipios de la Zona Metropolitana del Valle de México?¿Encuentras algún tipo de asociación entre las variables COVID19 y las características económicas de los municipios de la Zona Metropolitana del Valle de México?Quizá lo que te interese sólo sea la asociación entre pares de variables, sino el comportamiento individual de cada variable para conocer la forma de su distribución e identificar algunos valores extremos o atípicos (los llamados ourliers). Para ello, convendrá un tipo de gráfica que permita representar sólo una variable continúa (casos positivos o defunciones por COVID19), tal como un histograma, una gráfica de densidad o de caja.Los tres gráficos dan cuenta que la forma de la distribución muestra un marcado sesgo positivo (la derecha), lo que significa que hay algunos municipios o alcaldías con valores muy altos para esta variable, además de algunos valores extremadamente altos según el diagrama de caja, ¿cuáles podrán ser y qué explicaría este comportamiento atípicamente alto?EjercicioConsulta la ayuda de cada una de las funciones de geometría e intenta:Elaborar un histograma con diferentes categorías (bins). ¿Cambia esto la forma de la distribución?Elaborar un histograma con diferentes categorías (bins). ¿Cambia esto la forma de la distribución?Señalar de un color diferente las observaciones atípicas en el diagrama de caja ¿Hay manera de identificar qué alcaldías o municipios pertenecen dichos valores atípicos?Señalar de un color diferente las observaciones atípicas en el diagrama de caja ¿Hay manera de identificar qué alcaldías o municipios pertenecen dichos valores atípicos?Además, también es posible modificar las etiquetas de los ejes:Nuestra base de datos contiene una variable de tipo categórico, grado de marginación (gm_2020), asociada al índice de marginación (im). Para este tipo de variable puede ser conveniente construir un gráfico de barras especialmente diseñado para variables categóricas echando mano de la geometría geom_bar():Este gráfico revela que, de acuerdo con la clasificación del Consejo Nacional de Población y Vivienda (CONAPO), la gran mayoría de los municipios y alcaldías que componen el Valle de México están catalogados como de muy bajo grado de marginación.EjercicioObtén una gráfica de barras donde se muestre el número de unidades administrativas (municipios o alcaldías) por de cada una de las entidades que integran la Zona Metropolitana del Valle de México.Ahora bien, ¿será posible incorporar en un plano bidimensional una tercera variable? ¿Cómo añadirías un diagrama de dispersión, que relaciona dos variables, una tercera? Este instrumento es veces denominado gráfico de burbujas y si lo piensas con cuidado es una solución muy ingeniosa para añadir información extra sin renunciar la simpleza. Para hacerlo, basta con añadir el argumento size= dentro de los elementos estéticos de la función geom_point():EjercicioResponde lo siguiente:Prueba cambiar la variable que define el tamaño del círculo por nuestra variable categórica grado de marginación, ¿es recomendable usar una variable de este tipo en esta representación?Prueba cambiar la variable que define el tamaño del círculo por nuestra variable categórica grado de marginación, ¿es recomendable usar una variable de este tipo en esta representación?¿Qué papel juega el argumento alpha= en la segunda gráfica?¿Qué papel juega el argumento alpha= en la segunda gráfica?¿Cuál es la diferencia en colocar el argumento color dentro o fuera del grupo de elementos estéticos (aes())? ¿Notaste la diferencia en el par de gráficas anteriores? Prueba cambiar el argumento color dentro de aes() por otra variable y el color de los círculos.¿Cuál es la diferencia en colocar el argumento color dentro o fuera del grupo de elementos estéticos (aes())? ¿Notaste la diferencia en el par de gráficas anteriores? Prueba cambiar el argumento color dentro de aes() por otra variable y el color de los círculos.Finalmente, elaboremos una gráfica que nos ayude sintetizar pares de asociaciones entre variables (diagramas de dispersión) y formas de distribución través de un gráfico muy elegante construido con una extensión del paquete ggplot2: GGally. Para instalarlo, como es usual:Luego, para poder usarlo, lo llamamos al entorno de trabajo:La gráfica que buscamos es una matriz de diagramas de dispersión y la construiremos con la función ggpairs() y sólo dos argumentos: la fuente de datos y las variables que deseamos incluir. Veamos:La matriz de diagramas de dispersión construida con ggpairs es, desde mi personal punto de vista, sólo muy elegante, sino que ofrece elementos informativos en el gráfico que antes teníamos, tales como el coeficiente de correlación lineal y su nivel de significancia.Antes de pasar tratar otro elemento, hay que decir que RStudio permite exportar las gráficas hechas, tanto en diversos formatos de imagen (jpg, png, tiff) como en PDF.EjercicioElabora tu propia matriz de diagramas de dispersión con las variables que, tu juicio, resulten más relevantes para explicar la dinámica tanto de las muertes como de los casos positivos de COVID19.Tareas relacionadas con la preparación y manipulación de datos, que en una hoja de cálculo como Excel de Office o Calc de LibreOffice, son rutinarias y muy sencillas, veces en R pueden significar un dolor de cabeza. obstante, dentro de los paquetes de la familia tidyverse encontramos dplyr. Este paquete brinda herramientas de manipulación de datos basadas en “gramática”, que es otra cosa que funciones (“verbos”) que permiten seleccionar o filtrar elementos en una base de datos, o bien, agrupar y crear nuevas variables.Si deseas profundizar en el conocimiento de este potente paquete consulta la Introducción al paquete dplyr, o bien, su Viñeta de ayuda.La base de datos que cargamos contiene 55 columnas, es decir, 55 variables. Quizá para su análisis te sean de interés todas, por lo que querrías generar una base de datos más compacta mediante la selección de algunas que son de utilidad. Para llevar cabo dicha tarea echaremos mano de la función select(), pero antes de hacerlo, es necesario introducir el operador “tubería”, pipe (%>%).Este operador sirve para indicar cada fase del proceso por el que un objeto es tratado través de la aplicación de diferentes funciones u operaciones. Por ejemplo, queremos que la base covid_zmvm “pase” por un proceso que consiste en la selección de sólo algunas variables. Comencemos usando el “verbo” seleccionar, select(), para una sola variable, por ejemplo pos_hab:La instrucción anterior es equivalente escribir lo siguiente:Así, usar el operador tubería permite sólo ahorrar la escritura de algunos argumentos, sino simplificar la forma en que las instrucciones dadas R son leídas por un ser humano. Veamos cómo seleccionar ahora, por ejemplo, tres variables: la clave de municipio (cvemun), los casos positivos (pos_hab) y el grado de marginación (gm_2020):Ahora, imagina que queremos todas las variables excepto el nombre de la Zona Metropolitana, nom_zm. Sería ocioso colocar todos los nombres de las variables menos el citado. Para hacer esto más eficiente es necesario introducir solamente un signo de menos (-) antes del nombre de la variable, para de esta sencilla forma seleccionar todas las variables menos nom_zm.En lugar de usar los nombres de las variables, puedes recurrir al número de columna en la que se hallan, contando partir del 1. Por ejemplo, nom_mun es la columna 3 y pos_hab es la columna 16, entonces podríamos escribir:Y si es de nuestro interés seleccionar un número consecutivo de columnas, podemos servirnos de:EjercicioPara finalizar lo relacionado con la selección, genera una nueva base de datos llamada covid que contenga las siguientes variables: cvemun, nom_mun, cve_ent, nom_ent, ext, pos_hab, def_hab, ocviv, occu, ppob_1, ppob_1dorm, im, gm_2020, grad, poind, pocom, poss, tmind, tmcom, tmss, rmind, rmcom, rmss, den, pob20.Si ahora lo que te interesa es seleccionar filas o casos en lugar de columnas, hay que echar mano de otro “verbo”, es decir, de la función filtrar, filter(). Por ejemplo, imagina que deseamos seleccionar sólo los municipios del Estado de México. Estos municipios cumplen con la condición de que todos ellos tienen el valor “México” en la variable nom_ent (nombre de entidad), o bien, tener el valor “15” en el de cve_ent (clave de entidad). Para poder hacer un uso eficiente de la función de filtrado es necesario introducir también otro tipo de operadores, los llamados operadores lógicos, que aparecen en el cuadro 1.2:Cuadro 1.2Entonces, para usar la función filter() y tomando como base la información previa:Para hacer una selección de dos entidades, incluiremos dos expresiones en una misma consulta echando mano del operador lógico “o”, identificado con el signo |:EjercicioSelecciona los municipios con una extensión territorial mayor 84 \\(km^2\\).Selecciona los municipios con una extensión territorial mayor 84 \\(km^2\\).Selecciona los municipios con entre 10 y 20 casos positivos por cada mil habitantes.Selecciona los municipios con entre 10 y 20 casos positivos por cada mil habitantes.Selecciona los municipios del Estado de México que tengan más de 10 años promedio de estudio y menos de 10 casos positivos por cada mil habitantes.Selecciona los municipios del Estado de México que tengan más de 10 años promedio de estudio y menos de 10 casos positivos por cada mil habitantes.¿Qué otros filtros relevantes podrías pensar y elaborar?Una operación útil, cuando se analiza información, tiene que ver con ordenar la base de datos con arreglo al valor de una variable. En R con dplyr de tidyverse esto se hace con la función arrange(), por ejemplo:El resultado de la función anterior ordena nuestra base de menor mayor, con base en la clave municipal. Además, es posible incluir varios criterios de ordenación, por ejemplo, si tuvieras los campos año, mes y día podría ordenarse conforme al calendario. En el caso del ejemplo siguiente, primero se ordena con arreglo la clave de entidad y luego con respecto la clave municipal y luego por la extensión territorial por cada mil habitantes:Si deseas ordenar de forma descendente, es decir, de mayor menor hay que introducir una función adicional, desc(), por ejemplo:La función anterior primero ordena los municipios con base en la clave de municipio de forma ascendente (de menor mayor) y simultáneamente coloca de mayor menor los municipios de acuerdo con su extensión territorial.EjerciciosGenera una nueva base de datos (un nuevo objeto) que contenga sólo las alcaldías de la Ciudad de México y las variables casos por cada mil habitantes, luego ordena esa base de datos con arreglo al número de casos positivos de forma ascendente.Genera una nueva base de datos (un nuevo objeto) que contenga sólo las alcaldías de la Ciudad de México y las variables casos por cada mil habitantes, luego ordena esa base de datos con arreglo al número de casos positivos de forma ascendente.lo mismo que en el inciso anterior, pero para los municipios del Estado de México y las defunciones.lo mismo que en el inciso anterior, pero para los municipios del Estado de México y las defunciones.Para añadir una nueva variable partir de las existentes recurrimos la función mutate(). Por ejemplo, calculemos la variable densidad de casos positivos, es decir, número de casos positivos dividido entre la extensión territorial, dicha variable la llamaremos pos_den. Pero antes, generemos una nueva base de datos que sólo contenga algunas de las variables de la base original:Notarás como la nueva variable aparece al final de la base. Vamos intentar unir varios de los elementos que hemos aprendido hasta este punto para que veas el potencial de uso de la tubería. Vamos crear una nueva variable, la misma que hace un momento, luego, tomaremos la base que contiene la nueva variable y construiremos con ella un diagrama de dispersión con la nueva variable y el número de defunciones por cada mil habitantes:¿Cómo explicarías la relación entre la variable creada, densidad de casos positivos, y las defunciones por cada mil habitables?Ejercicio¿Cómo añadirías más de una nueva variable tu base original?¿Cómo añadirías más de una nueva variable tu base original?Construye la variable “densidad de defunciones” y grafícala en un diagrama de dispersión con la densidad de población? Usa las cañerías.Construye la variable “densidad de defunciones” y grafícala en un diagrama de dispersión con la densidad de población? Usa las cañerías.Quizá lo que te interese sea sólo quedarte con algunas de las variables originales y las nuevas variables creadas partir de la información de la variable original. Para ello es útil la función transmute():El segmento de código anterior genera una nueva base en la que sólo conservamos algunas de las variables originales y añadimos dos nuevas partir de la información original.Quizá una de las funciones más potentes y sencillas que tiene dplyr es la función de resumen (summarise()). Veamos cómo opera. Imagina que deseas un promedio del número de casos que terminaron en muerte:Esto es particularmente útil si se le compara con la función del paquete base de R, summary(), pero si la combinamos con la función de agrupamiento, group_by() la situación cambia. Imagina que queremos el promedio de casos positivos por cada mil habitantes para cada conjunto de municipios de las tres entidades que componen el Valle de México:El en segmento de código anterior primero se agrupa la información con arreglo al criterio de clave de entidad, cve_ent, y luego, para cada grupo, calcula el resultado especificado: un promedio. Dentro de la función de resumen, summarise(), se puede llevar cabo sólo múltiples operaciones sino que estas pueden ser de diferente naturaleza, incluso por ejemplo una suma o una cuenta:En el segmento de código anterior creamos tres variables de resumen: la población total, pob_tot, que es la suma de la población para cada entidad, el promedio del índice de marginación, im_medio y el número de municipios de cada entidad través de una cuenta con la función n().EjercicioConstruye una gráfica de barras donde aparezca el total de población para cada entidad, partir del segmento código anterior.Construye una gráfica de barras donde aparezca el total de población para cada entidad, partir del segmento código anterior.¿Es posible agrupar la información con arreglo otra variable? Construye algunas medidas de resumen con esos grupos y gráficalos.¿Es posible agrupar la información con arreglo otra variable? Construye algunas medidas de resumen con esos grupos y gráficalos.Estas y otras tantas funciones son desarrolladas con todo detalle y de forma muy amena en el citado libro de Wickham y Grolemund, R data science, por lo que su estudio se recomienda ampliamente.En el siguiente capítulo continuamos con la exploración de la información, pero de un tipo particular de información: la información espacial.","code":"\n5+10## [1] 15\nx <- 3 #Numérico\ny <- \"Hello World\" #Carácter \nz <- FALSE # Lógico\nx <- 5+10\nclass(y)## [1] \"character\"\nstr(y)##  chr \"Hello World\"\nx <- c(\"a\",\"v\")\nx## [1] \"a\" \"v\"\nx <- c(\"a\",\"v\")\nx## [1] \"a\" \"v\"\nx <- c(TRUE,FALSE)\nx## [1]  TRUE FALSE\nx<- c(4+5i,3+2i)\nx## [1] 4+5i 3+2i\nx<-c(1:10)\nx##  [1]  1  2  3  4  5  6  7  8  9 10\nm <- matrix(data=1:6,nrow = 2,ncol = 3)\nx<-1:3\nx## [1] 1 2 3\ny<-10:12\ny## [1] 10 11 12\ncbind(x,y)##      x  y\n## [1,] 1 10\n## [2,] 2 11\n## [3,] 3 12\nrbind(x,y)##   [,1] [,2] [,3]\n## x    1    2    3\n## y   10   11   12\nx <- factor(c(\"yes\",\"no\",\"no\",\"yes\",\"no\"))\nx## [1] yes no  no  yes no \n## Levels: no yes\ninstall.packages(\"tmap\")\ninstall.packages(\"spatialreg\")\ninstall.packages(c(\"tmap\", \"spatialreg\"))\nlibrary(tmap)\nhelp(tmap)\n??ggplot\nhelp(matrix)\nhelp(mean)\ndata()\ndata(CO2)\ninstall.packages(\"tidyverse\")\nlibrary(readxl)\ncovid_zmvm <- readxl::read_excel(path=\"base de datos\\\\covid_zmvm.xlsx\")\nbase::file.choose()\nlibrary(readr)\nruta <- base::file.choose()\ncovid_zmvm <- utils::read.csv(ruta)\nbase::names(covid_zmvm) #Nombres de las variables##  [1] \"cvemun\"     \"cve_mun\"    \"nom_mun\"    \"cve_ent\"    \"nom_ent\"   \n##  [6] \"nom_abr\"    \"nom_zm\"     \"cvm\"        \"ext\"        \"pob20\"     \n## [11] \"pob20_h\"    \"pob20_m\"    \"positivos\"  \"defuncione\" \"pos_mil\"   \n## [16] \"pos_hab\"    \"def_hab\"    \"ss\"         \"ppob_sines\" \"ppob_basi\" \n## [21] \"ppob_media\" \"ppob_sup\"   \"ocviv\"      \"occu\"       \"pintegra4_\"\n## [26] \"pintegra6_\" \"pintegra8_\" \"ppob_5_o_m\" \"ppob_3_o_m\" \"ppob_1\"    \n## [31] \"ppob_1dorm\" \"ppob_2dorm\" \"ppob_3dorm\" \"pviv_ocu5_\" \"pviv_ocu7_\"\n## [36] \"pviv_ocu9_\" \"analf\"      \"sbasc\"      \"vhac\"       \"po2sm\"     \n## [41] \"im\"         \"gm_2020\"    \"grad\"       \"grad_h\"     \"grad_m\"    \n## [46] \"poind\"      \"pocom\"      \"poss\"       \"tmind\"      \"tmcom\"     \n## [51] \"tmss\"       \"rmind\"      \"rmcom\"      \"rmss\"       \"den\"\nutils::str(covid_zmvm) #Estructura de la base de datos## tibble [76 × 55] (S3: tbl_df/tbl/data.frame)\n##  $ cvemun    : chr [1:76] \"09010\" \"09012\" \"09015\" \"09017\" ...\n##  $ cve_mun   : chr [1:76] \"010\" \"012\" \"015\" \"017\" ...\n##  $ nom_mun   : chr [1:76] \"Álvaro Obregón\" \"Tlalpan\" \"Cuauhtémoc\" \"Venustiano Carranza\" ...\n##  $ cve_ent   : chr [1:76] \"09\" \"09\" \"09\" \"09\" ...\n##  $ nom_ent   : chr [1:76] \"Ciudad de México\" \"Ciudad de México\" \"Ciudad de México\" \"Ciudad de México\" ...\n##  $ nom_abr   : chr [1:76] \"CDMX\" \"CDMX\" \"CDMX\" \"CDMX\" ...\n##  $ nom_zm    : chr [1:76] \"Valle de México\" \"Valle de México\" \"Valle de México\" \"Valle de México\" ...\n##  $ cvm       : num [1:76] 9.01 9.01 9.01 9.01 9.01 9.01 9.01 9.01 9.01 9.01 ...\n##  $ ext       : num [1:76] 96.2 310.4 32.5 33.9 85.8 ...\n##  $ pob20     : num [1:76] 759137 699928 545884 443704 392313 ...\n##  $ pob20_h   : num [1:76] 361007 334877 260951 210118 190190 ...\n##  $ pob20_m   : num [1:76] 398130 365051 284933 233586 202123 ...\n##  $ positivos : num [1:76] 10905 11887 7289 7172 6812 ...\n##  $ defuncione: num [1:76] 868 542 754 585 289 713 648 397 190 391 ...\n##  $ pos_mil   : num [1:76] 14.4 17 13.4 16.2 17.4 ...\n##  $ pos_hab   : num [1:76] 14.4 17 13.4 16.2 17.4 ...\n##  $ def_hab   : num [1:76] 1.143 0.774 1.381 1.318 0.737 ...\n##  $ ss        : num [1:76] 75 71.1 71.6 71.6 72.7 ...\n##  $ ppob_sines: num [1:76] 0.0204 0.0195 0.0119 0.0121 0.0193 ...\n##  $ ppob_basi : num [1:76] 0.41 0.391 0.307 0.379 0.469 ...\n##  $ ppob_media: num [1:76] 0.252 0.253 0.251 0.291 0.299 ...\n##  $ ppob_sup  : num [1:76] 0.314 0.335 0.427 0.316 0.211 ...\n##  $ ocviv     : num [1:76] 3.45 3.44 2.75 3.26 3.67 3.21 3.2 3.74 3.6 2.81 ...\n##  $ occu      : num [1:76] 0.81 0.81 0.72 0.82 0.93 0.77 0.7 0.91 0.81 0.66 ...\n##  $ pintegra4_: num [1:76] 0.648 0.644 0.48 0.609 0.699 ...\n##  $ pintegra6_: num [1:76] 0.252 0.226 0.142 0.219 0.262 ...\n##  $ pintegra8_: num [1:76] 0.1071 0.0864 0.0422 0.0798 0.0982 ...\n##  $ ppob_5_o_m: num [1:76] 0.726 0.73 0.888 0.821 0.792 ...\n##  $ ppob_3_o_m: num [1:76] 0.32 0.315 0.363 0.354 0.354 ...\n##  $ ppob_1    : num [1:76] 0.0369 0.0499 0.0249 0.0247 0.0513 ...\n##  $ ppob_1dorm: num [1:76] 0.211 0.212 0.199 0.202 0.209 ...\n##  $ ppob_2dorm: num [1:76] 0.566 0.547 0.8 0.696 0.614 ...\n##  $ ppob_3dorm: num [1:76] 0.832 0.848 0.947 0.89 0.864 ...\n##  $ pviv_ocu5_: num [1:76] 0.226 0.22 0.127 0.198 0.267 ...\n##  $ pviv_ocu7_: num [1:76] 0.0641 0.0568 0.026 0.0513 0.0701 ...\n##  $ pviv_ocu9_: num [1:76] 0.02334 0.01815 0.00645 0.01593 0.02167 ...\n##  $ analf     : num [1:76] 1.574 1.606 0.953 1.085 1.673 ...\n##  $ sbasc     : num [1:76] 19 18.2 13.5 16.9 20.3 ...\n##  $ vhac      : num [1:76] 15.25 15.19 9.42 14.43 18.3 ...\n##  $ po2sm     : num [1:76] 49.3 61.2 41.4 57.2 65.4 ...\n##  $ im        : num [1:76] 60.4 59.5 61.3 60.3 59.3 ...\n##  $ gm_2020   : chr [1:76] \"Muy Bajo\" \"Muy Bajo\" \"Muy Bajo\" \"Muy Bajo\" ...\n##  $ grad      : num [1:76] 11.3 11.5 12.4 11.5 10.5 ...\n##  $ grad_h    : num [1:76] 11.5 11.7 12.8 11.7 10.7 ...\n##  $ grad_m    : num [1:76] 11.1 11.4 12.1 11.3 10.4 ...\n##  $ poind     : num [1:76] 0.0912 0.0874 0.1334 0.0714 0.2442 ...\n##  $ pocom     : num [1:76] 0.16 0.185 0.166 0.289 0.394 ...\n##  $ poss      : num [1:76] 0.749 0.728 0.7 0.64 0.361 ...\n##  $ tmind     : num [1:76] 20.32 8.9 27.57 6.57 6.42 ...\n##  $ tmcom     : num [1:76] 5.95 3.48 4.36 2.66 2.12 ...\n##  $ tmss      : num [1:76] 27.69 13.91 24.87 9.94 2.59 ...\n##  $ rmind     : num [1:76] 68.2 116.7 55.9 64.9 78.3 ...\n##  $ rmcom     : num [1:76] 50.6 31.3 45.5 31.2 23.5 ...\n##  $ rmss      : num [1:76] 178.3 36.3 255.6 101.4 23.4 ...\n##  $ den       : num [1:76] 7895 2255 16786 13104 4575 ...\nbase::dim(covid_zmvm) #Dimensiones de la base## [1] 76 55\nutils::View(covid_zmvm)\n#Que es equivalente a:\nView(covid_zmvm)\nbase::print(covid_zmvm)## # A tibble: 76 × 55\n##    cvemun cve_mun nom_mun      cve_ent nom_ent nom_abr nom_zm   cvm   ext  pob20\n##    <chr>  <chr>   <chr>        <chr>   <chr>   <chr>   <chr>  <dbl> <dbl>  <dbl>\n##  1 09010  010     Álvaro Obre… 09      Ciudad… CDMX    Valle…  9.01  96.2 759137\n##  2 09012  012     Tlalpan      09      Ciudad… CDMX    Valle…  9.01 310.  699928\n##  3 09015  015     Cuauhtémoc   09      Ciudad… CDMX    Valle…  9.01  32.5 545884\n##  4 09017  017     Venustiano … 09      Ciudad… CDMX    Valle…  9.01  33.9 443704\n##  5 09011  011     Tláhuac      09      Ciudad… CDMX    Valle…  9.01  85.8 392313\n##  6 09002  002     Azcapotzalco 09      Ciudad… CDMX    Valle…  9.01  33.5 432205\n##  7 09003  003     Coyoacán     09      Ciudad… CDMX    Valle…  9.01  53.9 614447\n##  8 09013  013     Xochimilco   09      Ciudad… CDMX    Valle…  9.01 118.  442178\n##  9 09004  004     Cuajimalpa … 09      Ciudad… CDMX    Valle…  9.01  71.2 217686\n## 10 09016  016     Miguel Hida… 09      Ciudad… CDMX    Valle…  9.01  46.4 414470\n## # … with 66 more rows, and 45 more variables: pob20_h <dbl>, pob20_m <dbl>,\n## #   positivos <dbl>, defuncione <dbl>, pos_mil <dbl>, pos_hab <dbl>,\n## #   def_hab <dbl>, ss <dbl>, ppob_sines <dbl>, ppob_basi <dbl>,\n## #   ppob_media <dbl>, ppob_sup <dbl>, ocviv <dbl>, occu <dbl>,\n## #   pintegra4_ <dbl>, pintegra6_ <dbl>, pintegra8_ <dbl>, ppob_5_o_m <dbl>,\n## #   ppob_3_o_m <dbl>, ppob_1 <dbl>, ppob_1dorm <dbl>, ppob_2dorm <dbl>,\n## #   ppob_3dorm <dbl>, pviv_ocu5_ <dbl>, pviv_ocu7_ <dbl>, pviv_ocu9_ <dbl>, …\nutils::head(covid_zmvm) #Para los primeros casos## # A tibble: 6 × 55\n##   cvemun cve_mun nom_mun       cve_ent nom_ent nom_abr nom_zm   cvm   ext  pob20\n##   <chr>  <chr>   <chr>         <chr>   <chr>   <chr>   <chr>  <dbl> <dbl>  <dbl>\n## 1 09010  010     Álvaro Obreg… 09      Ciudad… CDMX    Valle…  9.01  96.2 759137\n## 2 09012  012     Tlalpan       09      Ciudad… CDMX    Valle…  9.01 310.  699928\n## 3 09015  015     Cuauhtémoc    09      Ciudad… CDMX    Valle…  9.01  32.5 545884\n## 4 09017  017     Venustiano C… 09      Ciudad… CDMX    Valle…  9.01  33.9 443704\n## 5 09011  011     Tláhuac       09      Ciudad… CDMX    Valle…  9.01  85.8 392313\n## 6 09002  002     Azcapotzalco  09      Ciudad… CDMX    Valle…  9.01  33.5 432205\n## # … with 45 more variables: pob20_h <dbl>, pob20_m <dbl>, positivos <dbl>,\n## #   defuncione <dbl>, pos_mil <dbl>, pos_hab <dbl>, def_hab <dbl>, ss <dbl>,\n## #   ppob_sines <dbl>, ppob_basi <dbl>, ppob_media <dbl>, ppob_sup <dbl>,\n## #   ocviv <dbl>, occu <dbl>, pintegra4_ <dbl>, pintegra6_ <dbl>,\n## #   pintegra8_ <dbl>, ppob_5_o_m <dbl>, ppob_3_o_m <dbl>, ppob_1 <dbl>,\n## #   ppob_1dorm <dbl>, ppob_2dorm <dbl>, ppob_3dorm <dbl>, pviv_ocu5_ <dbl>,\n## #   pviv_ocu7_ <dbl>, pviv_ocu9_ <dbl>, analf <dbl>, sbasc <dbl>, vhac <dbl>, …\nutils::tail(covid_zmvm) #Para los últimos casos## # A tibble: 6 × 55\n##   cvemun cve_mun nom_mun      cve_ent nom_ent nom_abr nom_zm   cvm    ext  pob20\n##   <chr>  <chr>   <chr>        <chr>   <chr>   <chr>   <chr>  <dbl>  <dbl>  <dbl>\n## 1 15120  120     Zumpango     15      México  Mex.    Valle…  9.01 224.   2.80e5\n## 2 15121  121     Cuautitlán … 15      México  Mex.    Valle…  9.01 110.   5.55e5\n## 3 15122  122     Valle de Ch… 15      México  Mex.    Valle…  9.01  46.6  3.92e5\n## 4 15125  125     Tonanitla    15      México  Mex.    Valle…  9.01   9.04 1.49e4\n## 5 15058  058     Nezahualcóy… 15      México  Mex.    Valle…  9.01  63.3  1.08e6\n## 6 09005  005     Gustavo A. … 09      Ciudad… CDMX    Valle…  9.01  87.9  1.17e6\n## # … with 45 more variables: pob20_h <dbl>, pob20_m <dbl>, positivos <dbl>,\n## #   defuncione <dbl>, pos_mil <dbl>, pos_hab <dbl>, def_hab <dbl>, ss <dbl>,\n## #   ppob_sines <dbl>, ppob_basi <dbl>, ppob_media <dbl>, ppob_sup <dbl>,\n## #   ocviv <dbl>, occu <dbl>, pintegra4_ <dbl>, pintegra6_ <dbl>,\n## #   pintegra8_ <dbl>, ppob_5_o_m <dbl>, ppob_3_o_m <dbl>, ppob_1 <dbl>,\n## #   ppob_1dorm <dbl>, ppob_2dorm <dbl>, ppob_3dorm <dbl>, pviv_ocu5_ <dbl>,\n## #   pviv_ocu7_ <dbl>, pviv_ocu9_ <dbl>, analf <dbl>, sbasc <dbl>, vhac <dbl>, …\nbase::ncol(covid_zmvm) #Para conocer el número de columnas## [1] 55\nbase::nrow(covid_zmvm) #Para conocer el número de filas## [1] 76\nlibrary(tidyverse)\nggplot2::ggplot(data=covid_zmvm)+\n  ggplot2::geom_point(aes(x=grad,y=pos_hab))\nggplot2::ggplot(data=covid_zmvm)+\n  ggplot2::geom_point(aes(x=grad,y=pos_hab))+\n  ggplot2::geom_smooth(aes(x=grad,y=pos_hab))\nggplot2::ggplot(data=covid_zmvm)+\n  ggplot2::geom_point(aes(x=grad,y=pos_hab))+\n  ggplot2::geom_smooth(aes(x=grad,y=pos_hab), method = \"lm\")\nggplot2::ggplot(data=covid_zmvm)+\n  ggplot2::geom_point(aes(x=grad,y=def_hab))+\n  ggplot2::geom_smooth(aes(x=grad,y=def_hab), method = \"lm\")\n#Histograma para los casos positivos por cada mil habitantes\nggplot2::ggplot(covid_zmvm)+\n  ggplot2::geom_histogram(aes(x=pos_hab))\n#Gráfico de densidad para los casos positivos por cada mil habitantes\nggplot2::ggplot(covid_zmvm)+\n  ggplot2::geom_density(aes(x=pos_hab))\n#Gráfico de caja para los casos positivos por cada mil habitantes\nggplot2::ggplot(covid_zmvm)+\n  ggplot2::geom_boxplot(aes(x=pos_hab))\nggplot2::ggplot(data=covid_zmvm)+\n  ggplot2::geom_histogram(aes(x=pos_hab))+\n  ggplot2::labs(x=\"Casos positivos por cada mil habitantes\", y=\"Frecuencia\")## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\nggplot2::ggplot(covid_zmvm)+\n ggplot2:: geom_bar(aes(x=gm_2020))+\n  ggplot2::labs(x=\"Grado de marginación 2020\", y=\"Frecuencia\")\n#Si tienes la librería ggplot2 cargada en el enorno de trabajo, alternativamente, puedes escribir:\nggplot(covid_zmvm)+\n geom_bar(aes(x=gm_2020))+\n  labs(x=\"Grado de marginación 2020\", y=\"Frecuencia\")\n#Tamaño del circulo dado por los años estudiados\nggplot2::ggplot(covid_zmvm)+\n  ggplot2::geom_point(aes(x=grad,y=pos_hab,size=def_hab))\n#Transparencia del círculo dado por los años estudiados\nggplot2::ggplot(covid_zmvm)+\n  ggplot2::geom_point(aes(x=grad,y=pos_hab,alpha=def_hab, size=def_hab), color=\"navyblue\")\n#Transparencia del círculo dado por los años estudiados\nggplot2::ggplot(covid_zmvm)+\n  ggplot2::geom_point(aes(x=grad,y=pos_hab,color=def_hab))\ninstall.packages(\"GGally\")\nlibrary(GGally)\n#Definiendo los nombres de las variables\nGGally::ggpairs(data=covid_zmvm, columns = c(\"pos_hab\",\"def_hab\",\"im\",\"grad\"))\n#Indicando el número de columna según el lugar que ocupa en la base\nGGally::ggpairs(data=covid_zmvm, columns = c(16,17,41,43))\ncovid_zmvm %>% dplyr::select(pos_hab)## # A tibble: 76 × 1\n##    pos_hab\n##      <dbl>\n##  1    14.4\n##  2    17.0\n##  3    13.4\n##  4    16.2\n##  5    17.4\n##  6    17.3\n##  7    14.9\n##  8    17.4\n##  9    18.7\n## 10    13.7\n## # … with 66 more rows\ndplyr::select(covid_zmvm,pos_hab)## # A tibble: 76 × 1\n##    pos_hab\n##      <dbl>\n##  1    14.4\n##  2    17.0\n##  3    13.4\n##  4    16.2\n##  5    17.4\n##  6    17.3\n##  7    14.9\n##  8    17.4\n##  9    18.7\n## 10    13.7\n## # … with 66 more rows\ncovid_zmvm %>% dplyr::select(cvemun,pos_hab,gm_2020)## # A tibble: 76 × 3\n##    cvemun pos_hab gm_2020 \n##    <chr>    <dbl> <chr>   \n##  1 09010     14.4 Muy Bajo\n##  2 09012     17.0 Muy Bajo\n##  3 09015     13.4 Muy Bajo\n##  4 09017     16.2 Muy Bajo\n##  5 09011     17.4 Muy Bajo\n##  6 09002     17.3 Muy Bajo\n##  7 09003     14.9 Muy Bajo\n##  8 09013     17.4 Muy Bajo\n##  9 09004     18.7 Muy Bajo\n## 10 09016     13.7 Muy Bajo\n## # … with 66 more rows\ncovid_zmvm %>% dplyr::select(-nom_zm)## # A tibble: 76 × 54\n##    cvemun cve_mun nom_mun     cve_ent nom_ent nom_abr   cvm   ext  pob20 pob20_h\n##    <chr>  <chr>   <chr>       <chr>   <chr>   <chr>   <dbl> <dbl>  <dbl>   <dbl>\n##  1 09010  010     Álvaro Obr… 09      Ciudad… CDMX     9.01  96.2 759137  361007\n##  2 09012  012     Tlalpan     09      Ciudad… CDMX     9.01 310.  699928  334877\n##  3 09015  015     Cuauhtémoc  09      Ciudad… CDMX     9.01  32.5 545884  260951\n##  4 09017  017     Venustiano… 09      Ciudad… CDMX     9.01  33.9 443704  210118\n##  5 09011  011     Tláhuac     09      Ciudad… CDMX     9.01  85.8 392313  190190\n##  6 09002  002     Azcapotzal… 09      Ciudad… CDMX     9.01  33.5 432205  204950\n##  7 09003  003     Coyoacán    09      Ciudad… CDMX     9.01  53.9 614447  289110\n##  8 09013  013     Xochimilco  09      Ciudad… CDMX     9.01 118.  442178  215452\n##  9 09004  004     Cuajimalpa… 09      Ciudad… CDMX     9.01  71.2 217686  104149\n## 10 09016  016     Miguel Hid… 09      Ciudad… CDMX     9.01  46.4 414470  195467\n## # … with 66 more rows, and 44 more variables: pob20_m <dbl>, positivos <dbl>,\n## #   defuncione <dbl>, pos_mil <dbl>, pos_hab <dbl>, def_hab <dbl>, ss <dbl>,\n## #   ppob_sines <dbl>, ppob_basi <dbl>, ppob_media <dbl>, ppob_sup <dbl>,\n## #   ocviv <dbl>, occu <dbl>, pintegra4_ <dbl>, pintegra6_ <dbl>,\n## #   pintegra8_ <dbl>, ppob_5_o_m <dbl>, ppob_3_o_m <dbl>, ppob_1 <dbl>,\n## #   ppob_1dorm <dbl>, ppob_2dorm <dbl>, ppob_3dorm <dbl>, pviv_ocu5_ <dbl>,\n## #   pviv_ocu7_ <dbl>, pviv_ocu9_ <dbl>, analf <dbl>, sbasc <dbl>, vhac <dbl>, …\ncovid_zmvm %>% dplyr::select(3,16)## # A tibble: 76 × 2\n##    nom_mun               pos_hab\n##    <chr>                   <dbl>\n##  1 Álvaro Obregón           14.4\n##  2 Tlalpan                  17.0\n##  3 Cuauhtémoc               13.4\n##  4 Venustiano Carranza      16.2\n##  5 Tláhuac                  17.4\n##  6 Azcapotzalco             17.3\n##  7 Coyoacán                 14.9\n##  8 Xochimilco               17.4\n##  9 Cuajimalpa de Morelos    18.7\n## 10 Miguel Hidalgo           13.7\n## # … with 66 more rows\ncovid_zmvm %>% dplyr::select(1:10)## # A tibble: 76 × 10\n##    cvemun cve_mun nom_mun      cve_ent nom_ent nom_abr nom_zm   cvm   ext  pob20\n##    <chr>  <chr>   <chr>        <chr>   <chr>   <chr>   <chr>  <dbl> <dbl>  <dbl>\n##  1 09010  010     Álvaro Obre… 09      Ciudad… CDMX    Valle…  9.01  96.2 759137\n##  2 09012  012     Tlalpan      09      Ciudad… CDMX    Valle…  9.01 310.  699928\n##  3 09015  015     Cuauhtémoc   09      Ciudad… CDMX    Valle…  9.01  32.5 545884\n##  4 09017  017     Venustiano … 09      Ciudad… CDMX    Valle…  9.01  33.9 443704\n##  5 09011  011     Tláhuac      09      Ciudad… CDMX    Valle…  9.01  85.8 392313\n##  6 09002  002     Azcapotzalco 09      Ciudad… CDMX    Valle…  9.01  33.5 432205\n##  7 09003  003     Coyoacán     09      Ciudad… CDMX    Valle…  9.01  53.9 614447\n##  8 09013  013     Xochimilco   09      Ciudad… CDMX    Valle…  9.01 118.  442178\n##  9 09004  004     Cuajimalpa … 09      Ciudad… CDMX    Valle…  9.01  71.2 217686\n## 10 09016  016     Miguel Hida… 09      Ciudad… CDMX    Valle…  9.01  46.4 414470\n## # … with 66 more rows\ncovid_zmvm %>% dplyr::filter(cve_ent==\"15\")## # A tibble: 59 × 55\n##    cvemun cve_mun nom_mun      cve_ent nom_ent nom_abr nom_zm   cvm   ext  pob20\n##    <chr>  <chr>   <chr>        <chr>   <chr>   <chr>   <chr>  <dbl> <dbl>  <dbl>\n##  1 15002  002     Acolman      15      México  Mex.    Valle…  9.01  83.9 171507\n##  2 15009  009     Amecameca    15      México  Mex.    Valle…  9.01 189.   53441\n##  3 15010  010     Apaxco       15      México  Mex.    Valle…  9.01  75.7  31898\n##  4 15011  011     Atenco       15      México  Mex.    Valle…  9.01  84.6  75489\n##  5 15013  013     Atizapán de… 15      México  Mex.    Valle…  9.01  91.1 523674\n##  6 15015  015     Atlautla     15      México  Mex.    Valle…  9.01 162.   31900\n##  7 15016  016     Axapusco     15      México  Mex.    Valle…  9.01 231.   29128\n##  8 15017  017     Ayapango     15      México  Mex.    Valle…  9.01  36.4  10053\n##  9 15020  020     Coacalco de… 15      México  Mex.    Valle…  9.01  35.1 293444\n## 10 15022  022     Cocotitlán   15      México  Mex.    Valle…  9.01  15.0  15107\n## # … with 49 more rows, and 45 more variables: pob20_h <dbl>, pob20_m <dbl>,\n## #   positivos <dbl>, defuncione <dbl>, pos_mil <dbl>, pos_hab <dbl>,\n## #   def_hab <dbl>, ss <dbl>, ppob_sines <dbl>, ppob_basi <dbl>,\n## #   ppob_media <dbl>, ppob_sup <dbl>, ocviv <dbl>, occu <dbl>,\n## #   pintegra4_ <dbl>, pintegra6_ <dbl>, pintegra8_ <dbl>, ppob_5_o_m <dbl>,\n## #   ppob_3_o_m <dbl>, ppob_1 <dbl>, ppob_1dorm <dbl>, ppob_2dorm <dbl>,\n## #   ppob_3dorm <dbl>, pviv_ocu5_ <dbl>, pviv_ocu7_ <dbl>, pviv_ocu9_ <dbl>, …\n#O bien\ncovid_zmvm %>% dplyr::filter(nom_ent==\"México\")## # A tibble: 59 × 55\n##    cvemun cve_mun nom_mun      cve_ent nom_ent nom_abr nom_zm   cvm   ext  pob20\n##    <chr>  <chr>   <chr>        <chr>   <chr>   <chr>   <chr>  <dbl> <dbl>  <dbl>\n##  1 15002  002     Acolman      15      México  Mex.    Valle…  9.01  83.9 171507\n##  2 15009  009     Amecameca    15      México  Mex.    Valle…  9.01 189.   53441\n##  3 15010  010     Apaxco       15      México  Mex.    Valle…  9.01  75.7  31898\n##  4 15011  011     Atenco       15      México  Mex.    Valle…  9.01  84.6  75489\n##  5 15013  013     Atizapán de… 15      México  Mex.    Valle…  9.01  91.1 523674\n##  6 15015  015     Atlautla     15      México  Mex.    Valle…  9.01 162.   31900\n##  7 15016  016     Axapusco     15      México  Mex.    Valle…  9.01 231.   29128\n##  8 15017  017     Ayapango     15      México  Mex.    Valle…  9.01  36.4  10053\n##  9 15020  020     Coacalco de… 15      México  Mex.    Valle…  9.01  35.1 293444\n## 10 15022  022     Cocotitlán   15      México  Mex.    Valle…  9.01  15.0  15107\n## # … with 49 more rows, and 45 more variables: pob20_h <dbl>, pob20_m <dbl>,\n## #   positivos <dbl>, defuncione <dbl>, pos_mil <dbl>, pos_hab <dbl>,\n## #   def_hab <dbl>, ss <dbl>, ppob_sines <dbl>, ppob_basi <dbl>,\n## #   ppob_media <dbl>, ppob_sup <dbl>, ocviv <dbl>, occu <dbl>,\n## #   pintegra4_ <dbl>, pintegra6_ <dbl>, pintegra8_ <dbl>, ppob_5_o_m <dbl>,\n## #   ppob_3_o_m <dbl>, ppob_1 <dbl>, ppob_1dorm <dbl>, ppob_2dorm <dbl>,\n## #   ppob_3dorm <dbl>, pviv_ocu5_ <dbl>, pviv_ocu7_ <dbl>, pviv_ocu9_ <dbl>, …\ncovid_zmvm %>% dplyr::filter(cve_ent==\"09\"|cve_ent==\"15\")## # A tibble: 75 × 55\n##    cvemun cve_mun nom_mun      cve_ent nom_ent nom_abr nom_zm   cvm   ext  pob20\n##    <chr>  <chr>   <chr>        <chr>   <chr>   <chr>   <chr>  <dbl> <dbl>  <dbl>\n##  1 09010  010     Álvaro Obre… 09      Ciudad… CDMX    Valle…  9.01  96.2 759137\n##  2 09012  012     Tlalpan      09      Ciudad… CDMX    Valle…  9.01 310.  699928\n##  3 09015  015     Cuauhtémoc   09      Ciudad… CDMX    Valle…  9.01  32.5 545884\n##  4 09017  017     Venustiano … 09      Ciudad… CDMX    Valle…  9.01  33.9 443704\n##  5 09011  011     Tláhuac      09      Ciudad… CDMX    Valle…  9.01  85.8 392313\n##  6 09002  002     Azcapotzalco 09      Ciudad… CDMX    Valle…  9.01  33.5 432205\n##  7 09003  003     Coyoacán     09      Ciudad… CDMX    Valle…  9.01  53.9 614447\n##  8 09013  013     Xochimilco   09      Ciudad… CDMX    Valle…  9.01 118.  442178\n##  9 09004  004     Cuajimalpa … 09      Ciudad… CDMX    Valle…  9.01  71.2 217686\n## 10 09016  016     Miguel Hida… 09      Ciudad… CDMX    Valle…  9.01  46.4 414470\n## # … with 65 more rows, and 45 more variables: pob20_h <dbl>, pob20_m <dbl>,\n## #   positivos <dbl>, defuncione <dbl>, pos_mil <dbl>, pos_hab <dbl>,\n## #   def_hab <dbl>, ss <dbl>, ppob_sines <dbl>, ppob_basi <dbl>,\n## #   ppob_media <dbl>, ppob_sup <dbl>, ocviv <dbl>, occu <dbl>,\n## #   pintegra4_ <dbl>, pintegra6_ <dbl>, pintegra8_ <dbl>, ppob_5_o_m <dbl>,\n## #   ppob_3_o_m <dbl>, ppob_1 <dbl>, ppob_1dorm <dbl>, ppob_2dorm <dbl>,\n## #   ppob_3dorm <dbl>, pviv_ocu5_ <dbl>, pviv_ocu7_ <dbl>, pviv_ocu9_ <dbl>, …\ncovid_zmvm %>% dplyr::arrange(cvemun)## # A tibble: 76 × 55\n##    cvemun cve_mun nom_mun      cve_ent nom_ent nom_abr nom_zm   cvm   ext  pob20\n##    <chr>  <chr>   <chr>        <chr>   <chr>   <chr>   <chr>  <dbl> <dbl>  <dbl>\n##  1 09002  002     Azcapotzalco 09      Ciudad… CDMX    Valle…  9.01  33.5 4.32e5\n##  2 09003  003     Coyoacán     09      Ciudad… CDMX    Valle…  9.01  53.9 6.14e5\n##  3 09004  004     Cuajimalpa … 09      Ciudad… CDMX    Valle…  9.01  71.2 2.18e5\n##  4 09005  005     Gustavo A. … 09      Ciudad… CDMX    Valle…  9.01  87.9 1.17e6\n##  5 09006  006     Iztacalco    09      Ciudad… CDMX    Valle…  9.01  23.1 4.05e5\n##  6 09007  007     Iztapalapa   09      Ciudad… CDMX    Valle…  9.01 113.  1.84e6\n##  7 09008  008     La Magdalen… 09      Ciudad… CDMX    Valle…  9.01  63.4 2.48e5\n##  8 09009  009     Milpa Alta   09      Ciudad… CDMX    Valle…  9.01 298.  1.53e5\n##  9 09010  010     Álvaro Obre… 09      Ciudad… CDMX    Valle…  9.01  96.2 7.59e5\n## 10 09011  011     Tláhuac      09      Ciudad… CDMX    Valle…  9.01  85.8 3.92e5\n## # … with 66 more rows, and 45 more variables: pob20_h <dbl>, pob20_m <dbl>,\n## #   positivos <dbl>, defuncione <dbl>, pos_mil <dbl>, pos_hab <dbl>,\n## #   def_hab <dbl>, ss <dbl>, ppob_sines <dbl>, ppob_basi <dbl>,\n## #   ppob_media <dbl>, ppob_sup <dbl>, ocviv <dbl>, occu <dbl>,\n## #   pintegra4_ <dbl>, pintegra6_ <dbl>, pintegra8_ <dbl>, ppob_5_o_m <dbl>,\n## #   ppob_3_o_m <dbl>, ppob_1 <dbl>, ppob_1dorm <dbl>, ppob_2dorm <dbl>,\n## #   ppob_3dorm <dbl>, pviv_ocu5_ <dbl>, pviv_ocu7_ <dbl>, pviv_ocu9_ <dbl>, …\ncovid_zmvm %>% dplyr::arrange(cvemun,ext)## # A tibble: 76 × 55\n##    cvemun cve_mun nom_mun      cve_ent nom_ent nom_abr nom_zm   cvm   ext  pob20\n##    <chr>  <chr>   <chr>        <chr>   <chr>   <chr>   <chr>  <dbl> <dbl>  <dbl>\n##  1 09002  002     Azcapotzalco 09      Ciudad… CDMX    Valle…  9.01  33.5 4.32e5\n##  2 09003  003     Coyoacán     09      Ciudad… CDMX    Valle…  9.01  53.9 6.14e5\n##  3 09004  004     Cuajimalpa … 09      Ciudad… CDMX    Valle…  9.01  71.2 2.18e5\n##  4 09005  005     Gustavo A. … 09      Ciudad… CDMX    Valle…  9.01  87.9 1.17e6\n##  5 09006  006     Iztacalco    09      Ciudad… CDMX    Valle…  9.01  23.1 4.05e5\n##  6 09007  007     Iztapalapa   09      Ciudad… CDMX    Valle…  9.01 113.  1.84e6\n##  7 09008  008     La Magdalen… 09      Ciudad… CDMX    Valle…  9.01  63.4 2.48e5\n##  8 09009  009     Milpa Alta   09      Ciudad… CDMX    Valle…  9.01 298.  1.53e5\n##  9 09010  010     Álvaro Obre… 09      Ciudad… CDMX    Valle…  9.01  96.2 7.59e5\n## 10 09011  011     Tláhuac      09      Ciudad… CDMX    Valle…  9.01  85.8 3.92e5\n## # … with 66 more rows, and 45 more variables: pob20_h <dbl>, pob20_m <dbl>,\n## #   positivos <dbl>, defuncione <dbl>, pos_mil <dbl>, pos_hab <dbl>,\n## #   def_hab <dbl>, ss <dbl>, ppob_sines <dbl>, ppob_basi <dbl>,\n## #   ppob_media <dbl>, ppob_sup <dbl>, ocviv <dbl>, occu <dbl>,\n## #   pintegra4_ <dbl>, pintegra6_ <dbl>, pintegra8_ <dbl>, ppob_5_o_m <dbl>,\n## #   ppob_3_o_m <dbl>, ppob_1 <dbl>, ppob_1dorm <dbl>, ppob_2dorm <dbl>,\n## #   ppob_3dorm <dbl>, pviv_ocu5_ <dbl>, pviv_ocu7_ <dbl>, pviv_ocu9_ <dbl>, …\ncovid_zmvm %>% dplyr::arrange(cvemun,desc(ext))## # A tibble: 76 × 55\n##    cvemun cve_mun nom_mun      cve_ent nom_ent nom_abr nom_zm   cvm   ext  pob20\n##    <chr>  <chr>   <chr>        <chr>   <chr>   <chr>   <chr>  <dbl> <dbl>  <dbl>\n##  1 09002  002     Azcapotzalco 09      Ciudad… CDMX    Valle…  9.01  33.5 4.32e5\n##  2 09003  003     Coyoacán     09      Ciudad… CDMX    Valle…  9.01  53.9 6.14e5\n##  3 09004  004     Cuajimalpa … 09      Ciudad… CDMX    Valle…  9.01  71.2 2.18e5\n##  4 09005  005     Gustavo A. … 09      Ciudad… CDMX    Valle…  9.01  87.9 1.17e6\n##  5 09006  006     Iztacalco    09      Ciudad… CDMX    Valle…  9.01  23.1 4.05e5\n##  6 09007  007     Iztapalapa   09      Ciudad… CDMX    Valle…  9.01 113.  1.84e6\n##  7 09008  008     La Magdalen… 09      Ciudad… CDMX    Valle…  9.01  63.4 2.48e5\n##  8 09009  009     Milpa Alta   09      Ciudad… CDMX    Valle…  9.01 298.  1.53e5\n##  9 09010  010     Álvaro Obre… 09      Ciudad… CDMX    Valle…  9.01  96.2 7.59e5\n## 10 09011  011     Tláhuac      09      Ciudad… CDMX    Valle…  9.01  85.8 3.92e5\n## # … with 66 more rows, and 45 more variables: pob20_h <dbl>, pob20_m <dbl>,\n## #   positivos <dbl>, defuncione <dbl>, pos_mil <dbl>, pos_hab <dbl>,\n## #   def_hab <dbl>, ss <dbl>, ppob_sines <dbl>, ppob_basi <dbl>,\n## #   ppob_media <dbl>, ppob_sup <dbl>, ocviv <dbl>, occu <dbl>,\n## #   pintegra4_ <dbl>, pintegra6_ <dbl>, pintegra8_ <dbl>, ppob_5_o_m <dbl>,\n## #   ppob_3_o_m <dbl>, ppob_1 <dbl>, ppob_1dorm <dbl>, ppob_2dorm <dbl>,\n## #   ppob_3dorm <dbl>, pviv_ocu5_ <dbl>, pviv_ocu7_ <dbl>, pviv_ocu9_ <dbl>, …\ncovid_zmvm %>% dplyr::select(cvemun,nom_mun,positivos,pos_hab,ext) %>%\n  dplyr::mutate(pos_den=positivos/ext)## # A tibble: 76 × 6\n##    cvemun nom_mun               positivos pos_hab   ext pos_den\n##    <chr>  <chr>                     <dbl>   <dbl> <dbl>   <dbl>\n##  1 09010  Álvaro Obregón            10905    14.4  96.2   113. \n##  2 09012  Tlalpan                   11887    17.0 310.     38.3\n##  3 09015  Cuauhtémoc                 7289    13.4  32.5   224. \n##  4 09017  Venustiano Carranza        7172    16.2  33.9   212. \n##  5 09011  Tláhuac                    6812    17.4  85.8    79.4\n##  6 09002  Azcapotzalco               7483    17.3  33.5   223. \n##  7 09003  Coyoacán                   9182    14.9  53.9   170. \n##  8 09013  Xochimilco                 7696    17.4 118.     65.1\n##  9 09004  Cuajimalpa de Morelos      4071    18.7  71.2    57.2\n## 10 09016  Miguel Hidalgo             5669    13.7  46.4   122. \n## # … with 66 more rows\ncovid_zmvm %>% \n  dplyr::mutate(pos_den=positivos/ext) %>% \n  ggplot2::ggplot()+\n    ggplot2::geom_point(aes(x=pos_den,y=def_hab))+\n    ggplot2::geom_smooth(aes(x=pos_den,y=def_hab))+\n    ggplot2::labs(x=\"Densidad de casos positivos\",y=\"Defunciones por cada mil habitantes\")\ncovid_zmvm %>% \n  dplyr::transmute(cvemun,nom_mun,pos_hab,def_hab,pos_den=positivos/ext,def_den=defuncione/ext)## # A tibble: 76 × 6\n##    cvemun nom_mun               pos_hab def_hab pos_den def_den\n##    <chr>  <chr>                   <dbl>   <dbl>   <dbl>   <dbl>\n##  1 09010  Álvaro Obregón           14.4   1.14    113.     9.03\n##  2 09012  Tlalpan                  17.0   0.774    38.3    1.75\n##  3 09015  Cuauhtémoc               13.4   1.38    224.    23.2 \n##  4 09017  Venustiano Carranza      16.2   1.32    212.    17.3 \n##  5 09011  Tláhuac                  17.4   0.737    79.4    3.37\n##  6 09002  Azcapotzalco             17.3   1.65    223.    21.3 \n##  7 09003  Coyoacán                 14.9   1.05    170.    12.0 \n##  8 09013  Xochimilco               17.4   0.898    65.1    3.36\n##  9 09004  Cuajimalpa de Morelos    18.7   0.873    57.2    2.67\n## 10 09016  Miguel Hidalgo           13.7   0.943   122.     8.43\n## # … with 66 more rows\ncovid_zmvm %>%\n  dplyr::summarise(promedio_def=mean(def_hab, na.rm=TRUE))## # A tibble: 1 × 1\n##   promedio_def\n##          <dbl>\n## 1        0.683\ncovid_zmvm %>%\n  dplyr::group_by(cve_ent) %>% \n  summarise(promedio_def=mean(def_hab, na.rm=TRUE), promedio_pos=mean(pos_hab))## # A tibble: 3 × 3\n##   cve_ent promedio_def promedio_pos\n##   <chr>          <dbl>        <dbl>\n## 1 09             1.08         15.8 \n## 2 13             0.790         5.88\n## 3 15             0.572         4.57\ncovid_zmvm %>% \n  dplyr::group_by(cve_ent) %>%\n  dplyr::summarise(pob_tot=sum(pob20),im_medio=mean(im),tot_mun=n())## # A tibble: 3 × 4\n##   cve_ent  pob_tot im_medio tot_mun\n##   <chr>      <dbl>    <dbl>   <int>\n## 1 09       9209944     60.1      16\n## 2 13        168302     59.4       1\n## 3 15      12426269     58.0      59"},{"path":"r-una-introducción-desde-la-exploración-de-información.html","id":"r-lenguaje-de-programación-y-plataforma-de-análisis","chapter":"1 R: Una introducción desde la exploración de información","heading":"1.1 R: Lenguaje de programación y plataforma de análisis","text":"R es un lenguaje de programación orientado objetos, libre y de código abierto y además un ambiente enfocado al análisis estadístico y gráfico. Que sea libre significa, diferencia de otros programas, que cualquier persona puede usarlo, redistribuirlo o modificarlo, sin necesidad de contar con una licencia pago.R es un entorno de software libre para computación estadística y gráficos. Compila y se ejecuta en una amplia variedad de plataformas UNIX, Windows y MacOS. Fuente:  http://cran.r-project.orgUsar R en lugar de otras plataformas que requieren licencia pago es recomendable al menos por tres razones:Es libre: en contraste con otros populares programas informáticos como lo es STATA, del que una licencia sencilla ronda los 100 dólares por año.R es sólo un software, también es un lenguaje de programación; así, al aprenderlo se obtiene un resultado doble. De modo que cuando llegues manejarlo con profundidad, puedes crear tus propias librerías. sólo sirve para hacer análisis gráfico y estadístico, con el puedes hacer páginas web, ser usado como Sistema de Información Geográfica e incluso para escribir libros, como éste que ahora estas leyendo.Es un lenguaje con un amplio soporte, es decir, con multitud de guías y materiales para el autoaprendizaje.lo largo de este libro usaremos R través de RStudio, un entorno de desarrollo integrado o IDE por sus siglas en inglés. Así que, lo primero será descargar e instalar R y luego descargar e instalar RStudio.R puede ser descargado de aquí. Al seleccionar “download R” hay que elegir cualquier CRAN Mirror (del inglés Comprehensive R Archive Network que son repositorios que contienen una copia del código base de R y sus paquetes). México tiene dos, puedes elegir cualquiera.En tanto, R Studio puede ser desargado de aquí. Ve la sección “Download” en la parte superior y elije la versión gratuita. El navegador debería seleccionar la versión adecuada para tu equipo, sino es así, selecciona del listado que aparece en la parte inferior. También puedes consultar este video para seguir paso paso la instalación de ambos programas.Al abrir RStudio se mostrará una pantalla como la que aparece en la figura 1.1. La pantalla principal de RStudio está dividida en cuatro partes. En caso de que el recuadro superior izquierdo aparezca, da clic en el ícono de la hoja en blanco con el signo de más (New file, parte superior izquierda de la pantalla) para que se despliegue.\nFigura 1.1: Panel principal\nLas citadas cuatro secciones son:Fuente u origen (source): esta sección, zona superior izquierda, aparecerá una vez que des clic en New script. Aquí podrás escribir las líneas de código de tu proyecto y guardarlas para consultarlas cuando lo desees, visualizarás tus bases de datos organizadas en pestañas y varios otros elementos.Consola: localizada en la parte inferior izquierda, es donde aparece el puntero o prompt (>); este es el espacio en el que se insertarán o escribirán las líneas de código para ser ejecutadas por R y en donde se mostrarán parte de los resultados. Cuando el prompt aparezca, R está listo para recibir tus instrucciones.Archivo: en el espacio inferior derecho aparecen una serie de pestañas que muestran las carpetas y archivos de tu equipo, las gráficas realizadas y los paquetes disponibles, así como la ayuda de R y de sus paquetes.Ambiente: por último el área superior derecha, mostrará las variables creadas, bases de datos cargadas y todos los objetos activos en la sesión de R. Esta sección contiene otras dos pestañas: historial y conexiones. La primera ofrece una memoria de todas las instrucciones escritas en la consola, en tanto, la segunda le será útil cuando haga trabajo colaborativo través de, por ejemplo, GitHub.","code":""},{"path":"r-una-introducción-desde-la-exploración-de-información.html","id":"códigos-objetos-paquetes","chapter":"1 R: Una introducción desde la exploración de información","heading":"1.2 Códigos, objetos, paquetes","text":"","code":""},{"path":"r-una-introducción-desde-la-exploración-de-información.html","id":"código","chapter":"1 R: Una introducción desde la exploración de información","heading":"1.2.1 Código","text":"Los programas informáticos están construidos partir de código, éste puede ser entendido como un lenguaje partir del cual se dan las instrucciones la computadora para que realice alguna acción. Como en todo lenguaje, un aspecto sustantivo es la sintaxis y la ortografía, es decir, el orden y la corrección en la forma en que uno se comunica con el sistema de cómputo, de modo que si se escribe alguna instrucción de forma incorrecta o incompleta (faltas de ortografía o errores de sintaxis) la instrucción se ejecutará.En este sentido, se debe señalar que R es sensible al uso de mayúsculas y minúsculas, esto quiere decir para nuestro programa es lo mismo Árbol y árbol. Además, en este programa constantemente estará usando paréntesis y comas en las instrucciones, por lo que hay que poner especial atención para olvidar colocar alguno de ellos en la sentencia escrita. Otro elemento importante son las llamadas “palabras clave”, Keywords. Éstas son palabras reservadas, es decir, palabras con un significado especial para R y que hacen referencia instrucciones que pertenecen la estructura base del programa R por lo que está recomendado su uso. Algunos ejemplos de palabras reservadas son son: , else, break. Además, el nombre de las variables debe comenzar con caracteres especiales (&,#,$,%) o números.","code":""},{"path":"r-una-introducción-desde-la-exploración-de-información.html","id":"objetos-operadores-y-tipos-de-variables","chapter":"1 R: Una introducción desde la exploración de información","heading":"1.2.2 Objetos, operadores y tipos de variables","text":"Si bien R es tremendamente potente, puede incluso utilizarse como simple calculadora. Los operadores matemáticos que pueden emplearse en R se muestran en la figura 1.2:\nFigura 1.2: Operadores\nDe esta forma sí colocas en la consola el número 5 seguido del signo aritmético correspondiente, por ejemplo un signo de más, +, y luego otro número, R devolverá el resultado de la operación:En R, todos los elementos con los que se interactúa son denominados objetos (por eso se dice que es un lenguaje de programación orientado objetos), los hay de distintas clases y cada clase se puede identificar por un nombre. Los objetos más comunes en R son: constantes, variables, vectores, listas, matrices y arreglos de datos (data frames). Éstos últimos los hay en diferentes versiones dependiendo de algunas de sus características.Los objetos pueden contener diferentes tipos de información como: números enteros (integer), valores numéricos (numeric), números complejos (complex) o valores lógicos (logic) y de cadena/texto (character). Distinguir entre los tipos de información que contiene cada objeto es importante para conocer las operaciones que se pueden hacer entre ellos. Por ejemplo, es posible hacer operaciones matemáticas con variables tipo character ya que tiene sentido sumar aritméticamente “casa” y “azul”, pero sí es posible concatenarlos.Para crear objetos, en R se utiliza el singo “menor que” seguido de un guion para formar una suerte de flecha que apunta la izquierda, <-, éste singo es llamado operador de asignación y precisamente asigna contenido objetos, es decir, con el operador <- creamos un objeto que tendrá determinado contenido. Ve la sección consola de tu entorno de trabajo e ingresa las siguientes líneas de instrucciones (o simplemente da click en el ícono de copiar que aparece en la esquina superior derecha del cuadro que contiene el código):Tras haber escrito estas líneas de código notarás que en la sección superior derecha de RStudio aparecen, en la pestaña de ambiente, los tres objetos creados, cada uno con un nombre y contenido diferente entre ellos: x es un objeto numérico, y es una cadena de texto o carácter y z contiene un valor lógico. Basta con escribir el nombre del objeto en la consola para ver su contenido.Ahora, vuelve crear un objeto de nombre x que contenga el resultado de la suma de 5+10:Como es posible identificar, si en una sesión de R se utiliza dos veces el mismo nombre para una variable, se sobrescribe la información asignada esa variable, es decir, sólo permanece el último valor asignado: x ya contiene la primera asignación, 3, solamente la última, 15.Hay dos funciones muy útiles para conocer el tipo de objeto que tenemos en nuestro entorno de trabajo: La función class() y la función str(). La primera indica el tipo de objeto, en tanto, la segunda nos dice el tipo de objeto y su valor. En el siguiente ejemplo puedes ver que el objeto y es de tipo carácter y su contenido es la expresión “Hello World”.","code":"\n5+10## [1] 15\nx <- 3 #Numérico\ny <- \"Hello World\" #Carácter \nz <- FALSE # Lógico\nx <- 5+10\nclass(y)## [1] \"character\"\nstr(y)##  chr \"Hello World\""},{"path":"r-una-introducción-desde-la-exploración-de-información.html","id":"vectores","chapter":"1 R: Una introducción desde la exploración de información","heading":"1.2.2.1 Vectores","text":"Los vectores son una forma de almacenar más de un elemento en un objeto y dichos elementos tienen que ser necesariamente del mismo tipo, aunque es importante tener en cuenta que es recomendable combinar diferentes tipos de objetos porque se pueden alterar las clases de cada uno de los elementos originales. Cuando se quiere crear un vector que contiene cadenas de texto, cada cadena (palabra u oración) se debe poner entre comillas, como se ilustra continuación:El uso de vectores es útil para modificar las etiquetas de una gráfica o bien los encabezados de una tabla, ya que R tomará los valores de texto almacenados en el vector para utilizarlos en la forma deseada. Aquí se muestran otros tipos de objetos en un vector:Imagina que deseas crear un vector numérico con una secuencia numérica del 1 al 10. Para hacerlo, deberías proceder como:Es decir, fue necesario insertar en el vector cada uno de los 10 números, sino que la secuencia continua (del 1 al 10) se señaló con los dos puntos.","code":"\nx <- c(\"a\",\"v\")\nx## [1] \"a\" \"v\"\nx <- c(\"a\",\"v\")\nx## [1] \"a\" \"v\"\nx <- c(TRUE,FALSE)\nx## [1]  TRUE FALSE\nx<- c(4+5i,3+2i)\nx## [1] 4+5i 3+2i\nx<-c(1:10)\nx##  [1]  1  2  3  4  5  6  7  8  9 10"},{"path":"r-una-introducción-desde-la-exploración-de-información.html","id":"matrices","chapter":"1 R: Una introducción desde la exploración de información","heading":"1.2.2.2 Matrices","text":"Las matrices son un tipo de objeto que se distingue porque entre sus propiedades está el de tener dimensión (filas y columnas). Se puede generar una matriz en R con la función matrix() y se procede como:Las funciones, tanto las previamente citadas como esta, requieren que el usuario indique argumentos que son los elementos que aparecen entre paréntesis. La función matrix() requirió indicar varios: los datos que forman el contenido que tendrá la matriz,data=, el número de filas , nrow= y el número de columnas, ncol=. Recuerda: toda función requiere especificar determinados argumentos para que pueda funcionar.Alternativamente se pueden construir matrices partir de vectores. Para ello, se pueden usar las funciones cbind() y rbind(). Primero creamos dos vectores, x y y:La función cbind() permite “unir por columna” (column bind) y rbind() que “une por fila” (row bind). Así, con los vectores previamente construidos podemos tener dos matrices diferentes, esto dependerá si las unimos por fila:o columna:","code":"\nm <- matrix(data=1:6,nrow = 2,ncol = 3)\nx<-1:3\nx## [1] 1 2 3\ny<-10:12\ny## [1] 10 11 12\ncbind(x,y)##      x  y\n## [1,] 1 10\n## [2,] 2 11\n## [3,] 3 12\nrbind(x,y)##   [,1] [,2] [,3]\n## x    1    2    3\n## y   10   11   12"},{"path":"r-una-introducción-desde-la-exploración-de-información.html","id":"factores","chapter":"1 R: Una introducción desde la exploración de información","heading":"1.2.2.3 Factores","text":"Son un tipo especial de vectores y son utilizados para representar información categórica, lo que permite organizarla en niveles para analizarla mejor:Por ejemplo, cuando una variable contiene información sobre el sexo de un individuo es recomendable que en lugar de designar cada caso como 1 y 2 respectivamente, se usen variables categóricas como “masculino” y “femenido”, es decir, es recomendable almacenar la información como factor.","code":"\nx <- factor(c(\"yes\",\"no\",\"no\",\"yes\",\"no\"))\nx## [1] yes no  no  yes no \n## Levels: no yes"},{"path":"r-una-introducción-desde-la-exploración-de-información.html","id":"data-frame-o-arreglo-de-datos","chapter":"1 R: Una introducción desde la exploración de información","heading":"1.2.2.4 Data frame o arreglo de datos","text":"Esta estructura de datos es la más usada para realizar análisis en R. Son estructuras de datos de dos dimensiones, es decir, están compuestas por filas y columnas. Los renglones de un data frame admiten datos de distintos tipos, pero sus columnas tienen la restricción de contener datos sólo de un tipo. Para comprender mejor esto piensa en un data frame como si de una hoja de cálculo se tratara: los renglones representan casos, individuos u observaciones, mientras que las columnas representan atributos, rasgos o variables. Una columna con la variable “ingreso” deberá ser del mismo tipo para todos los casos, por ejemplo un valor numérico, en tanto, para el caso o individuo 1 (fila 1) tendremos información relativa sólo al ingreso, sino al sexo, estatura y edad, es decir, variables categóricas, numéricas y enteros, respectivamente.Cuando arribemos un poco más adelante al proceso de importación de información al entorno de trabajo se presentará cómo luce un arreglo de datos de estas características.","code":""},{"path":"r-una-introducción-desde-la-exploración-de-información.html","id":"paquetes","chapter":"1 R: Una introducción desde la exploración de información","heading":"1.2.3 Paquetes","text":"Se dijo que R es un programa especializado en el análisis estadístico y la representación gráfica, pero R sólo se limita lo que ofrece cuando lo descarga por primera vez. Uno de los elementos que hace de R una potente herramienta es la posibilidad de ampliar su potencial través de la instalación de paquetes que expanden sus funciones básicas. Existen paquetes de R para múltiples campos disciplinares y especialidades, por ejemplo estas notas se sirven de los paquetes especializados en el análisis espacial, como se observará en los capítulos subsecuentes. De momento mencionemos sólo un par:tmap: ofrece un enfoque flexible, basado en capas y fácil de usar para crear mapas temáticos.spatialreg: paquete para la elaboración de regresiones con componentes espaciales.Para poder hacer uso de los paquetes que amplían el potencial de R es necesario descargarlos, instalarlos y, en cada sesión de trabajo, llamarlos. Para la descarga e instalación podemos ir Archivo (File) en la cinta de menú que se localiza en la parte superior de tu entorno de trabajo y seleccionar tools/install package. continuación, deberás colocar el nombre del paquete deseado y dar click en instalar. O bien, alternativamente, puedes ir la sección de Archivo, en la zona inferior derecha, seleccionar la pestaña Packages y continuación el ícono de Install. Una tercera manera de instalar paquetes es desde la consola (sección inferior izquierda), para instalar un paquete la vez:O bien, varios paquetes la vez:Tras el proceso de instalación, en tu consola, R informará sobre el resultado de la instalación y te ofrecerá algunos datos sobre la ubicación del paquete en tu equipo. Para poder hacer uso de los paquetes basta con descargarlos e instalarlos, es necesario “llamarlos” en cada sesión de trabajo de R para ser utilizados. Para ello deberás usar la función library() y como argumento el nombre del paquete:","code":"\ninstall.packages(\"tmap\")\ninstall.packages(\"spatialreg\")\ninstall.packages(c(\"tmap\", \"spatialreg\"))\nlibrary(tmap)"},{"path":"r-una-introducción-desde-la-exploración-de-información.html","id":"solicitar-ayuda-de-un-paquete-o-función-de-r","chapter":"1 R: Una introducción desde la exploración de información","heading":"1.2.4 Solicitar ayuda de un paquete o función de R","text":"Cada uno de los paquetes y funciones de R está acompañado por materiales de referencia que explican con detalle su uso, así como los diferentes argumentos en el caso de las funciones. Para solicitar ayuda en R puedes recurrir la función help() e indicar como argumento el nombre de la función:Alternativamente, para solicitar ayuda puedes escribir dos signos de interrogación y el nombre del paquete o función:También puedes buscar ayuda de una función específica, por ejemplo, de las funciones para crear una matriz (matrix())o para calcular una media (mean()):En la cinta de menú, en la sección ayuda, Help, encontrarás una serie de materiales muy útiles para familiarizarse con los paquetes instalados. Estos materiales reciben el nombre de “hojas de trucos”, Cheatsheet. Se recomienda ampliamente revisar cada uno de ellos. Además, R es un programa con un sin número de entusiastas usuarios y con un amplio soporte técnico por lo que cuando te encuentres con una dificultad para usar algún paquete o función puedes remitite al sitio de Ayuda del R, o bien, alguno de los repositorios especializados para presentar y resolver dudas como Stackoverflow. Para ilustrar esto, ingresa al sitio de Stackoverflow y coloca en la búsqueda “histograma en R”.","code":"\nhelp(tmap)\n??ggplot\nhelp(matrix)\nhelp(mean)"},{"path":"r-una-introducción-desde-la-exploración-de-información.html","id":"cargar-bases-de-datos","chapter":"1 R: Una introducción desde la exploración de información","heading":"1.3 Cargar bases de datos","text":"En R hay algunas bases de datos que acompañan los paquetes que han sido instalados y sirven para ilustrar su funcionamiento. Las bases precargadas se pueden observar con la siguiente función:Verás una nueva pestaña en la sección de Fuente con el nombre de las bases y una breve descripción. Para cargar alguna de ellas basta introducir su nombre como argumento de la función data(), por ejemplo:","code":"\ndata()\ndata(CO2)"},{"path":"r-una-introducción-desde-la-exploración-de-información.html","id":"cargar-un-archivo-de-excel-xls-xslx","chapter":"1 R: Una introducción desde la exploración de información","heading":"1.3.1 Cargar un archivo de Excel (xls, xslx)","text":"tidyverse es un conjunto de paquetes diseñados especialmente para la Ciencia de Datos. Algunos de los paquetes de la familia tidyverse que usaremos aquí y un poco más adelante son:\n* ggplot2: es un sistema para crear gráficos basado en la llamada gramática de las gráficas.\n* dplyr: proporciona una serie de funciones para manipulación de datos. * readr: permite leer datos rectangualres provenientes de múltiples formatos.Como más adelante usaremos otros de los paquetes de la familia tidyverse instalaremos todos en este momento:Si deseas aprender cómo usar con detalle los paquetes de la familia tidyverse y elementos básicos de Ciencia de Datos, el libro de Hadley Wickham y Garrett Grolemund, R Data Science es una magnífica opción.Utilizando el paquete readxl de la familia tidyverse es posible cargar una base de datos en el formato de la popular hoja de cálculo de Microsoft Office. partir de aquí introduciremos una notación particular al usar una función en R, lo que te permitirá recordar qué paquete pertenece dicha función. La notación es: “paquete :: función()”, es decir, primero se colocará el nombre del paquete y, separado por dos pares de dos puntos, en el nombre de la función que pertenece dicho paquete (resulta claro que los paquetes están entonces integrados por múltiples funciones).Sigamos los siguientes pasos para cargar la base de datos covid_zmvm.xlsx que contiene información de los casos positivos y defunciones por COVID19 en los municipios de la Zona Metropolitana del Valle de México durante la primera ola de la pandemia, entre marzo septiembre de 2020, así como múltiples variables sociodemográficas y económicas.Llamemos específicamente al paquete que nos interesa:La función para cargar un libro de Excel es read_excel() y el argumento indispensable es la ruta o directorio donde está almacenado nuestro libro, el nombre y extensión del mismo, path. Creemos pues el objeto covid_zmvm:Para que puedas cargar satisfactoriamente la base, deberás sustituir la ruta por el directorio en el que está almacenado el archivo en tu equipo de cómputo. Una función útil para generar la cadena de texto de la ruta es file.choose(), del paquete base de R. Lleva la consola el código:y presiona enter, verás que aparece un cuadro de diálogo en el que deberás seleccionar el archivo deseado y luego pulsar “abrir”. El resultado aparecerá en tu consola como una cadena de texto entre comillas. Usa esa información para leer la base covid_zmvm.Revisa la ayuda de la función read_excel() para comprender todos los argumentos con los que puede operar la función y que te permitirán personalizar la carga de la base de datos en caso de que tengas múltiples hojas en el libro de Excel o desees rangos personalizados para importar.Ejercicio¿Quién es el autor o autora del paquete readxl?¿Quién es el autor o autora del paquete readxl?Descarga la hoja de trucos del paquete desde el sitio de tidyverse y responde, ¿el paquete sirve sólo para cargar información o es posible escribir y almacenar bases de datos con él?Descarga la hoja de trucos del paquete desde el sitio de tidyverse y responde, ¿el paquete sirve sólo para cargar información o es posible escribir y almacenar bases de datos con él?","code":"\ninstall.packages(\"tidyverse\")\nlibrary(readxl)\ncovid_zmvm <- readxl::read_excel(path=\"base de datos\\\\covid_zmvm.xlsx\")\nbase::file.choose()"},{"path":"r-una-introducción-desde-la-exploración-de-información.html","id":"cargar-archivos-separados-por-comas-csv","chapter":"1 R: Una introducción desde la exploración de información","heading":"1.3.2 Cargar archivos separados por comas (csv)","text":"Alternativamente, es posible que la base que deseemos cargar se encuentre en un formato diferente, por ejemplo, una base de datos con valores separados por comas (coma separate values, CSV). Para cargar una base en dicho formato, usaremos el paquete readr, que forma parte del paquete utilsLlama el paquete tu entorno de trabajo:Con la función anterior, file.choose() obtendremos la cadena de texto que indica la ruta del archivo cargar:Y, finalmente, cargamos la información con la función read.csv()","code":"\nlibrary(readr)\nruta <- base::file.choose()\ncovid_zmvm <- utils::read.csv(ruta)"},{"path":"r-una-introducción-desde-la-exploración-de-información.html","id":"cargar-bases-con-la-funcionalidad-importar","chapter":"1 R: Una introducción desde la exploración de información","heading":"1.3.3 Cargar bases con la funcionalidad importar","text":"Otra manera de cargar archivos de Excel o de texto (formato CSV) es ubicarnos en la sección de ambiente, ventana superior derecha, y seleccionar el ícono Import Dataset. Se desplegará un menú donde habremos de elegir el tipo de archivo que se desee importar. R sólo permite importar archivos de texto o Excel, también bases de SPSS o STATA. Siguiendo con la ilustración relativa libros de Excel, en la ventana que se despliega, habremos de señalar la ruta exacta o directorio donde está nuestro archivo, incluyendo el nombre y extensión de éste. Al pulsar en el botón actulizar (Update) se desplegara una vista previa de la base. Si aparece de forma correcta, seleccionaremos importar (Import), en caso contrario, se deberá modificar las opciones de importación. Después de seleccionar Import Dataset/Excel y elegir la ubicación del archivo que deseas importar, deberías ver en tu pantalla una imagen como la de la figura 1.3:\nFigura 1.3: Importar datos de excel\n","code":""},{"path":"r-una-introducción-desde-la-exploración-de-información.html","id":"exploración-inicial-a-través-de-gráficos","chapter":"1 R: Una introducción desde la exploración de información","heading":"1.4 Exploración inicial a través de gráficos","text":"Ahora que revisado algunas de las diversas maneras de cargar tu información al entorno de trabajo en R, es momento de comenzar analizarla. Si importaste la base de datos través de la función readxl::read_excel() notarás que el nuestra base covid_zmvm un objeto de tipo tbl_df que es un subtipo de data.frame o arreglo de datos Como el que se mencionó en antes.Las siguientes instrucciones nos ayudarán conocer los nombres de las columnas, la estructura de los datos y la dimensión de la base:Recuerda la notación que mencionamos antes, “paquete::función”; además, si el paquete está cargado, es necesario especificar su nombre al usar la función; al arrancar cada sesión de R, un conjunto de paquetes se cargan de forma automática, dichos paquetes aparecen marcados con una palomita, \\(\\checkmark\\), en la pestaña Packages en la sección de archivo.Ahora bien, si deseas ver la base completa puedes llamarla una nueva pestaña que se visualizará en la sección de fuente. Usa la siguiente instrucción:Alternativamente, puedes llamar la base para que aparezca en la consola, lo que siempre es recomendable si la base es muy grande.En su lugar, podrías preferir ver en la consola sólo los últimos y primeros casos:¿Qué tan grande es la base de datos? Si bien ya la función str() nos brindó información sobre la estructura de la base, puedes conocer el número de filas y columnas que componen tu arreglo de datos con las siguientes funciones:Conviene que se revise el archivo en formato txt que acompaña nuestra base y que opera modo de diccionario para que conocer el significado de cada una de las variables que componen nuestro archivo.Plantemos pues algunas preguntas y busquemos responderlas través de un análisis gráfico:¿Habrá alguna relación entre el número de casos positivos por cada mil habitantes, pos_hab, o muertes por cada mil habitantes, def_hab, con el nivel de estudios promedio de la población por municipio?Si esta relación existe, ¿es más intensa entre las muertes o los casos positivos?Para responder esta pregunta podemos recurrir la construcción de diagramas de dispersión. La elaboración de gráficas dentro de tidyverse corre cargo del paquete ggplot2, una potente librería para la representación visual de información. Este paquete se basa en lo que se denomina “gramática de gráficas” que es otra cosa que un conjunto de reglas coherentes con base en las cuales se elaboran los gráficos (Wickham y Grolemund (2016)).La construcción de gráficas con ggplot2 se hace partir de una suerte de “capas” o “enunciados”. Cada enunciado constituye una parte de la gráfica. Según la hoja de trucos del paquete (que puedes consultar desde la barra de menú en la opción Help/CheatSheet):ggplot2 se basa en la gramática de los gráficos, la idea de que puedes construir cada gráfico partir de los mismos componentes: un conjunto de datos, un sistema de coordenadas y “geoms”, es decir, marcas visuales que representan puntos de datos.Asi pues, se requieren tres elementos para la construcción de una gráfica con ggplot2: datos, geometría y sistema de coordenadas. Dentro de la geometría se especifican sólo la o las variables representar, también algunos elementos estéticos como colores. En nuestro caso, la información está contenida en la base covid_zmvm pero habrá que especificar qué tipo de gráfica deseamos y sus elementos estéticos. Veamos esto en acción:Tenemos pues dos enunciados o “capas”. La primera corresponde la función ggplot() donde colocamos (casi siempre) el primer elemento requerido: la base de datos de donde tomaremos la o las variables graficar, en tanto, el segundo enunciado corresponde la geometría, geom_ cuya parte después del guion bajo se modificará en función del tipo de gráfica utilizar. Algunos (sólo algunos) tipos de gráficas y su función de geometría asociada en ggplot2 aparecen en el cuadro 1.1:Cuadro 1.1Por favor, revisa la hoja de trucos del paquete para que te familiarices con las otras tantas geometrías y su uso, pues cada geometría requiere diferentes argumentos y admite varias posibles configuraciones. En general, dentro de la función de geometría, geom_, será necesario especificar los elementos estéticos, aes(), entre los que se cuenta la o las variables graficar y cómo serán representadas.Añadamos una “capa” adicional nuestra gráfica, combinando otra geometría como una línea de ajuste (pongamos atención en el uso del signo de más):Puedes ver cómo, al añadir una nueva geometría, fue necesario especificar los elementos estéticos del caso, pero los tres enunciados nos permiten tener una sola gráfica. Observa cómo R en tu consola R indica que estás usando determinado método de suavizamiento, el llamado “loess” que significa locally estimated scatterplot smoothing, por tanto, es fácil deducir que debe haber otros métodos de suavizamiento. Observa las siguientes líneas de código:Aquí, hemos añadido un argumento adicional, method=, para indicar un suavizamiento dado por un modelo lineal, lm, de linear model. Tenemos pues que entre el número de casos positivos y el número promedio de grados cursados hay una aparente relación positiva. ¿Qué hay para el caso de las defunciones:Si bien hay un poco más de dispersión, la aparente relación positiva se mantiene. ¿Qué crees que explique esta asociación? ¿Las personas con más años estudiados son susceptibles de contagiarse más fácil de COVID19? ¿O quizá se relacionará más con las diferencias que nivel territorial se dan entre los niveles de estudio de la población en el Valle de México?EjercicioElabora algunas gráficas de dispersión para responder las siguientes preguntas:¿Qué tipo de asociación lineal hay entre los casos positivos y defunciones por COVID19 con las características de la población según el número de dormitorios de las casas, el número de personas que habitan en cada casa y la densidad de población?¿Qué tipo de asociación lineal hay entre los casos positivos y defunciones por COVID19 con las características de la población según el número de dormitorios de las casas, el número de personas que habitan en cada casa y la densidad de población?¿Encuentras algún tipo de asociación entre las variables COVID19 y las características económicas de los municipios de la Zona Metropolitana del Valle de México?¿Encuentras algún tipo de asociación entre las variables COVID19 y las características económicas de los municipios de la Zona Metropolitana del Valle de México?Quizá lo que te interese sólo sea la asociación entre pares de variables, sino el comportamiento individual de cada variable para conocer la forma de su distribución e identificar algunos valores extremos o atípicos (los llamados ourliers). Para ello, convendrá un tipo de gráfica que permita representar sólo una variable continúa (casos positivos o defunciones por COVID19), tal como un histograma, una gráfica de densidad o de caja.Los tres gráficos dan cuenta que la forma de la distribución muestra un marcado sesgo positivo (la derecha), lo que significa que hay algunos municipios o alcaldías con valores muy altos para esta variable, además de algunos valores extremadamente altos según el diagrama de caja, ¿cuáles podrán ser y qué explicaría este comportamiento atípicamente alto?EjercicioConsulta la ayuda de cada una de las funciones de geometría e intenta:Elaborar un histograma con diferentes categorías (bins). ¿Cambia esto la forma de la distribución?Elaborar un histograma con diferentes categorías (bins). ¿Cambia esto la forma de la distribución?Señalar de un color diferente las observaciones atípicas en el diagrama de caja ¿Hay manera de identificar qué alcaldías o municipios pertenecen dichos valores atípicos?Señalar de un color diferente las observaciones atípicas en el diagrama de caja ¿Hay manera de identificar qué alcaldías o municipios pertenecen dichos valores atípicos?Además, también es posible modificar las etiquetas de los ejes:Nuestra base de datos contiene una variable de tipo categórico, grado de marginación (gm_2020), asociada al índice de marginación (im). Para este tipo de variable puede ser conveniente construir un gráfico de barras especialmente diseñado para variables categóricas echando mano de la geometría geom_bar():Este gráfico revela que, de acuerdo con la clasificación del Consejo Nacional de Población y Vivienda (CONAPO), la gran mayoría de los municipios y alcaldías que componen el Valle de México están catalogados como de muy bajo grado de marginación.EjercicioObtén una gráfica de barras donde se muestre el número de unidades administrativas (municipios o alcaldías) por de cada una de las entidades que integran la Zona Metropolitana del Valle de México.Ahora bien, ¿será posible incorporar en un plano bidimensional una tercera variable? ¿Cómo añadirías un diagrama de dispersión, que relaciona dos variables, una tercera? Este instrumento es veces denominado gráfico de burbujas y si lo piensas con cuidado es una solución muy ingeniosa para añadir información extra sin renunciar la simpleza. Para hacerlo, basta con añadir el argumento size= dentro de los elementos estéticos de la función geom_point():EjercicioResponde lo siguiente:Prueba cambiar la variable que define el tamaño del círculo por nuestra variable categórica grado de marginación, ¿es recomendable usar una variable de este tipo en esta representación?Prueba cambiar la variable que define el tamaño del círculo por nuestra variable categórica grado de marginación, ¿es recomendable usar una variable de este tipo en esta representación?¿Qué papel juega el argumento alpha= en la segunda gráfica?¿Qué papel juega el argumento alpha= en la segunda gráfica?¿Cuál es la diferencia en colocar el argumento color dentro o fuera del grupo de elementos estéticos (aes())? ¿Notaste la diferencia en el par de gráficas anteriores? Prueba cambiar el argumento color dentro de aes() por otra variable y el color de los círculos.¿Cuál es la diferencia en colocar el argumento color dentro o fuera del grupo de elementos estéticos (aes())? ¿Notaste la diferencia en el par de gráficas anteriores? Prueba cambiar el argumento color dentro de aes() por otra variable y el color de los círculos.Finalmente, elaboremos una gráfica que nos ayude sintetizar pares de asociaciones entre variables (diagramas de dispersión) y formas de distribución través de un gráfico muy elegante construido con una extensión del paquete ggplot2: GGally. Para instalarlo, como es usual:Luego, para poder usarlo, lo llamamos al entorno de trabajo:La gráfica que buscamos es una matriz de diagramas de dispersión y la construiremos con la función ggpairs() y sólo dos argumentos: la fuente de datos y las variables que deseamos incluir. Veamos:La matriz de diagramas de dispersión construida con ggpairs es, desde mi personal punto de vista, sólo muy elegante, sino que ofrece elementos informativos en el gráfico que antes teníamos, tales como el coeficiente de correlación lineal y su nivel de significancia.Antes de pasar tratar otro elemento, hay que decir que RStudio permite exportar las gráficas hechas, tanto en diversos formatos de imagen (jpg, png, tiff) como en PDF.EjercicioElabora tu propia matriz de diagramas de dispersión con las variables que, tu juicio, resulten más relevantes para explicar la dinámica tanto de las muertes como de los casos positivos de COVID19.","code":"\nbase::names(covid_zmvm) #Nombres de las variables##  [1] \"cvemun\"     \"cve_mun\"    \"nom_mun\"    \"cve_ent\"    \"nom_ent\"   \n##  [6] \"nom_abr\"    \"nom_zm\"     \"cvm\"        \"ext\"        \"pob20\"     \n## [11] \"pob20_h\"    \"pob20_m\"    \"positivos\"  \"defuncione\" \"pos_mil\"   \n## [16] \"pos_hab\"    \"def_hab\"    \"ss\"         \"ppob_sines\" \"ppob_basi\" \n## [21] \"ppob_media\" \"ppob_sup\"   \"ocviv\"      \"occu\"       \"pintegra4_\"\n## [26] \"pintegra6_\" \"pintegra8_\" \"ppob_5_o_m\" \"ppob_3_o_m\" \"ppob_1\"    \n## [31] \"ppob_1dorm\" \"ppob_2dorm\" \"ppob_3dorm\" \"pviv_ocu5_\" \"pviv_ocu7_\"\n## [36] \"pviv_ocu9_\" \"analf\"      \"sbasc\"      \"vhac\"       \"po2sm\"     \n## [41] \"im\"         \"gm_2020\"    \"grad\"       \"grad_h\"     \"grad_m\"    \n## [46] \"poind\"      \"pocom\"      \"poss\"       \"tmind\"      \"tmcom\"     \n## [51] \"tmss\"       \"rmind\"      \"rmcom\"      \"rmss\"       \"den\"\nutils::str(covid_zmvm) #Estructura de la base de datos## tibble [76 × 55] (S3: tbl_df/tbl/data.frame)\n##  $ cvemun    : chr [1:76] \"09010\" \"09012\" \"09015\" \"09017\" ...\n##  $ cve_mun   : chr [1:76] \"010\" \"012\" \"015\" \"017\" ...\n##  $ nom_mun   : chr [1:76] \"Álvaro Obregón\" \"Tlalpan\" \"Cuauhtémoc\" \"Venustiano Carranza\" ...\n##  $ cve_ent   : chr [1:76] \"09\" \"09\" \"09\" \"09\" ...\n##  $ nom_ent   : chr [1:76] \"Ciudad de México\" \"Ciudad de México\" \"Ciudad de México\" \"Ciudad de México\" ...\n##  $ nom_abr   : chr [1:76] \"CDMX\" \"CDMX\" \"CDMX\" \"CDMX\" ...\n##  $ nom_zm    : chr [1:76] \"Valle de México\" \"Valle de México\" \"Valle de México\" \"Valle de México\" ...\n##  $ cvm       : num [1:76] 9.01 9.01 9.01 9.01 9.01 9.01 9.01 9.01 9.01 9.01 ...\n##  $ ext       : num [1:76] 96.2 310.4 32.5 33.9 85.8 ...\n##  $ pob20     : num [1:76] 759137 699928 545884 443704 392313 ...\n##  $ pob20_h   : num [1:76] 361007 334877 260951 210118 190190 ...\n##  $ pob20_m   : num [1:76] 398130 365051 284933 233586 202123 ...\n##  $ positivos : num [1:76] 10905 11887 7289 7172 6812 ...\n##  $ defuncione: num [1:76] 868 542 754 585 289 713 648 397 190 391 ...\n##  $ pos_mil   : num [1:76] 14.4 17 13.4 16.2 17.4 ...\n##  $ pos_hab   : num [1:76] 14.4 17 13.4 16.2 17.4 ...\n##  $ def_hab   : num [1:76] 1.143 0.774 1.381 1.318 0.737 ...\n##  $ ss        : num [1:76] 75 71.1 71.6 71.6 72.7 ...\n##  $ ppob_sines: num [1:76] 0.0204 0.0195 0.0119 0.0121 0.0193 ...\n##  $ ppob_basi : num [1:76] 0.41 0.391 0.307 0.379 0.469 ...\n##  $ ppob_media: num [1:76] 0.252 0.253 0.251 0.291 0.299 ...\n##  $ ppob_sup  : num [1:76] 0.314 0.335 0.427 0.316 0.211 ...\n##  $ ocviv     : num [1:76] 3.45 3.44 2.75 3.26 3.67 3.21 3.2 3.74 3.6 2.81 ...\n##  $ occu      : num [1:76] 0.81 0.81 0.72 0.82 0.93 0.77 0.7 0.91 0.81 0.66 ...\n##  $ pintegra4_: num [1:76] 0.648 0.644 0.48 0.609 0.699 ...\n##  $ pintegra6_: num [1:76] 0.252 0.226 0.142 0.219 0.262 ...\n##  $ pintegra8_: num [1:76] 0.1071 0.0864 0.0422 0.0798 0.0982 ...\n##  $ ppob_5_o_m: num [1:76] 0.726 0.73 0.888 0.821 0.792 ...\n##  $ ppob_3_o_m: num [1:76] 0.32 0.315 0.363 0.354 0.354 ...\n##  $ ppob_1    : num [1:76] 0.0369 0.0499 0.0249 0.0247 0.0513 ...\n##  $ ppob_1dorm: num [1:76] 0.211 0.212 0.199 0.202 0.209 ...\n##  $ ppob_2dorm: num [1:76] 0.566 0.547 0.8 0.696 0.614 ...\n##  $ ppob_3dorm: num [1:76] 0.832 0.848 0.947 0.89 0.864 ...\n##  $ pviv_ocu5_: num [1:76] 0.226 0.22 0.127 0.198 0.267 ...\n##  $ pviv_ocu7_: num [1:76] 0.0641 0.0568 0.026 0.0513 0.0701 ...\n##  $ pviv_ocu9_: num [1:76] 0.02334 0.01815 0.00645 0.01593 0.02167 ...\n##  $ analf     : num [1:76] 1.574 1.606 0.953 1.085 1.673 ...\n##  $ sbasc     : num [1:76] 19 18.2 13.5 16.9 20.3 ...\n##  $ vhac      : num [1:76] 15.25 15.19 9.42 14.43 18.3 ...\n##  $ po2sm     : num [1:76] 49.3 61.2 41.4 57.2 65.4 ...\n##  $ im        : num [1:76] 60.4 59.5 61.3 60.3 59.3 ...\n##  $ gm_2020   : chr [1:76] \"Muy Bajo\" \"Muy Bajo\" \"Muy Bajo\" \"Muy Bajo\" ...\n##  $ grad      : num [1:76] 11.3 11.5 12.4 11.5 10.5 ...\n##  $ grad_h    : num [1:76] 11.5 11.7 12.8 11.7 10.7 ...\n##  $ grad_m    : num [1:76] 11.1 11.4 12.1 11.3 10.4 ...\n##  $ poind     : num [1:76] 0.0912 0.0874 0.1334 0.0714 0.2442 ...\n##  $ pocom     : num [1:76] 0.16 0.185 0.166 0.289 0.394 ...\n##  $ poss      : num [1:76] 0.749 0.728 0.7 0.64 0.361 ...\n##  $ tmind     : num [1:76] 20.32 8.9 27.57 6.57 6.42 ...\n##  $ tmcom     : num [1:76] 5.95 3.48 4.36 2.66 2.12 ...\n##  $ tmss      : num [1:76] 27.69 13.91 24.87 9.94 2.59 ...\n##  $ rmind     : num [1:76] 68.2 116.7 55.9 64.9 78.3 ...\n##  $ rmcom     : num [1:76] 50.6 31.3 45.5 31.2 23.5 ...\n##  $ rmss      : num [1:76] 178.3 36.3 255.6 101.4 23.4 ...\n##  $ den       : num [1:76] 7895 2255 16786 13104 4575 ...\nbase::dim(covid_zmvm) #Dimensiones de la base## [1] 76 55\nutils::View(covid_zmvm)\n#Que es equivalente a:\nView(covid_zmvm)\nbase::print(covid_zmvm)## # A tibble: 76 × 55\n##    cvemun cve_mun nom_mun      cve_ent nom_ent nom_abr nom_zm   cvm   ext  pob20\n##    <chr>  <chr>   <chr>        <chr>   <chr>   <chr>   <chr>  <dbl> <dbl>  <dbl>\n##  1 09010  010     Álvaro Obre… 09      Ciudad… CDMX    Valle…  9.01  96.2 759137\n##  2 09012  012     Tlalpan      09      Ciudad… CDMX    Valle…  9.01 310.  699928\n##  3 09015  015     Cuauhtémoc   09      Ciudad… CDMX    Valle…  9.01  32.5 545884\n##  4 09017  017     Venustiano … 09      Ciudad… CDMX    Valle…  9.01  33.9 443704\n##  5 09011  011     Tláhuac      09      Ciudad… CDMX    Valle…  9.01  85.8 392313\n##  6 09002  002     Azcapotzalco 09      Ciudad… CDMX    Valle…  9.01  33.5 432205\n##  7 09003  003     Coyoacán     09      Ciudad… CDMX    Valle…  9.01  53.9 614447\n##  8 09013  013     Xochimilco   09      Ciudad… CDMX    Valle…  9.01 118.  442178\n##  9 09004  004     Cuajimalpa … 09      Ciudad… CDMX    Valle…  9.01  71.2 217686\n## 10 09016  016     Miguel Hida… 09      Ciudad… CDMX    Valle…  9.01  46.4 414470\n## # … with 66 more rows, and 45 more variables: pob20_h <dbl>, pob20_m <dbl>,\n## #   positivos <dbl>, defuncione <dbl>, pos_mil <dbl>, pos_hab <dbl>,\n## #   def_hab <dbl>, ss <dbl>, ppob_sines <dbl>, ppob_basi <dbl>,\n## #   ppob_media <dbl>, ppob_sup <dbl>, ocviv <dbl>, occu <dbl>,\n## #   pintegra4_ <dbl>, pintegra6_ <dbl>, pintegra8_ <dbl>, ppob_5_o_m <dbl>,\n## #   ppob_3_o_m <dbl>, ppob_1 <dbl>, ppob_1dorm <dbl>, ppob_2dorm <dbl>,\n## #   ppob_3dorm <dbl>, pviv_ocu5_ <dbl>, pviv_ocu7_ <dbl>, pviv_ocu9_ <dbl>, …\nutils::head(covid_zmvm) #Para los primeros casos## # A tibble: 6 × 55\n##   cvemun cve_mun nom_mun       cve_ent nom_ent nom_abr nom_zm   cvm   ext  pob20\n##   <chr>  <chr>   <chr>         <chr>   <chr>   <chr>   <chr>  <dbl> <dbl>  <dbl>\n## 1 09010  010     Álvaro Obreg… 09      Ciudad… CDMX    Valle…  9.01  96.2 759137\n## 2 09012  012     Tlalpan       09      Ciudad… CDMX    Valle…  9.01 310.  699928\n## 3 09015  015     Cuauhtémoc    09      Ciudad… CDMX    Valle…  9.01  32.5 545884\n## 4 09017  017     Venustiano C… 09      Ciudad… CDMX    Valle…  9.01  33.9 443704\n## 5 09011  011     Tláhuac       09      Ciudad… CDMX    Valle…  9.01  85.8 392313\n## 6 09002  002     Azcapotzalco  09      Ciudad… CDMX    Valle…  9.01  33.5 432205\n## # … with 45 more variables: pob20_h <dbl>, pob20_m <dbl>, positivos <dbl>,\n## #   defuncione <dbl>, pos_mil <dbl>, pos_hab <dbl>, def_hab <dbl>, ss <dbl>,\n## #   ppob_sines <dbl>, ppob_basi <dbl>, ppob_media <dbl>, ppob_sup <dbl>,\n## #   ocviv <dbl>, occu <dbl>, pintegra4_ <dbl>, pintegra6_ <dbl>,\n## #   pintegra8_ <dbl>, ppob_5_o_m <dbl>, ppob_3_o_m <dbl>, ppob_1 <dbl>,\n## #   ppob_1dorm <dbl>, ppob_2dorm <dbl>, ppob_3dorm <dbl>, pviv_ocu5_ <dbl>,\n## #   pviv_ocu7_ <dbl>, pviv_ocu9_ <dbl>, analf <dbl>, sbasc <dbl>, vhac <dbl>, …\nutils::tail(covid_zmvm) #Para los últimos casos## # A tibble: 6 × 55\n##   cvemun cve_mun nom_mun      cve_ent nom_ent nom_abr nom_zm   cvm    ext  pob20\n##   <chr>  <chr>   <chr>        <chr>   <chr>   <chr>   <chr>  <dbl>  <dbl>  <dbl>\n## 1 15120  120     Zumpango     15      México  Mex.    Valle…  9.01 224.   2.80e5\n## 2 15121  121     Cuautitlán … 15      México  Mex.    Valle…  9.01 110.   5.55e5\n## 3 15122  122     Valle de Ch… 15      México  Mex.    Valle…  9.01  46.6  3.92e5\n## 4 15125  125     Tonanitla    15      México  Mex.    Valle…  9.01   9.04 1.49e4\n## 5 15058  058     Nezahualcóy… 15      México  Mex.    Valle…  9.01  63.3  1.08e6\n## 6 09005  005     Gustavo A. … 09      Ciudad… CDMX    Valle…  9.01  87.9  1.17e6\n## # … with 45 more variables: pob20_h <dbl>, pob20_m <dbl>, positivos <dbl>,\n## #   defuncione <dbl>, pos_mil <dbl>, pos_hab <dbl>, def_hab <dbl>, ss <dbl>,\n## #   ppob_sines <dbl>, ppob_basi <dbl>, ppob_media <dbl>, ppob_sup <dbl>,\n## #   ocviv <dbl>, occu <dbl>, pintegra4_ <dbl>, pintegra6_ <dbl>,\n## #   pintegra8_ <dbl>, ppob_5_o_m <dbl>, ppob_3_o_m <dbl>, ppob_1 <dbl>,\n## #   ppob_1dorm <dbl>, ppob_2dorm <dbl>, ppob_3dorm <dbl>, pviv_ocu5_ <dbl>,\n## #   pviv_ocu7_ <dbl>, pviv_ocu9_ <dbl>, analf <dbl>, sbasc <dbl>, vhac <dbl>, …\nbase::ncol(covid_zmvm) #Para conocer el número de columnas## [1] 55\nbase::nrow(covid_zmvm) #Para conocer el número de filas## [1] 76\nlibrary(tidyverse)\nggplot2::ggplot(data=covid_zmvm)+\n  ggplot2::geom_point(aes(x=grad,y=pos_hab))\nggplot2::ggplot(data=covid_zmvm)+\n  ggplot2::geom_point(aes(x=grad,y=pos_hab))+\n  ggplot2::geom_smooth(aes(x=grad,y=pos_hab))\nggplot2::ggplot(data=covid_zmvm)+\n  ggplot2::geom_point(aes(x=grad,y=pos_hab))+\n  ggplot2::geom_smooth(aes(x=grad,y=pos_hab), method = \"lm\")\nggplot2::ggplot(data=covid_zmvm)+\n  ggplot2::geom_point(aes(x=grad,y=def_hab))+\n  ggplot2::geom_smooth(aes(x=grad,y=def_hab), method = \"lm\")\n#Histograma para los casos positivos por cada mil habitantes\nggplot2::ggplot(covid_zmvm)+\n  ggplot2::geom_histogram(aes(x=pos_hab))\n#Gráfico de densidad para los casos positivos por cada mil habitantes\nggplot2::ggplot(covid_zmvm)+\n  ggplot2::geom_density(aes(x=pos_hab))\n#Gráfico de caja para los casos positivos por cada mil habitantes\nggplot2::ggplot(covid_zmvm)+\n  ggplot2::geom_boxplot(aes(x=pos_hab))\nggplot2::ggplot(data=covid_zmvm)+\n  ggplot2::geom_histogram(aes(x=pos_hab))+\n  ggplot2::labs(x=\"Casos positivos por cada mil habitantes\", y=\"Frecuencia\")## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\nggplot2::ggplot(covid_zmvm)+\n ggplot2:: geom_bar(aes(x=gm_2020))+\n  ggplot2::labs(x=\"Grado de marginación 2020\", y=\"Frecuencia\")\n#Si tienes la librería ggplot2 cargada en el enorno de trabajo, alternativamente, puedes escribir:\nggplot(covid_zmvm)+\n geom_bar(aes(x=gm_2020))+\n  labs(x=\"Grado de marginación 2020\", y=\"Frecuencia\")\n#Tamaño del circulo dado por los años estudiados\nggplot2::ggplot(covid_zmvm)+\n  ggplot2::geom_point(aes(x=grad,y=pos_hab,size=def_hab))\n#Transparencia del círculo dado por los años estudiados\nggplot2::ggplot(covid_zmvm)+\n  ggplot2::geom_point(aes(x=grad,y=pos_hab,alpha=def_hab, size=def_hab), color=\"navyblue\")\n#Transparencia del círculo dado por los años estudiados\nggplot2::ggplot(covid_zmvm)+\n  ggplot2::geom_point(aes(x=grad,y=pos_hab,color=def_hab))\ninstall.packages(\"GGally\")\nlibrary(GGally)\n#Definiendo los nombres de las variables\nGGally::ggpairs(data=covid_zmvm, columns = c(\"pos_hab\",\"def_hab\",\"im\",\"grad\"))\n#Indicando el número de columna según el lugar que ocupa en la base\nGGally::ggpairs(data=covid_zmvm, columns = c(16,17,41,43))"},{"path":"r-una-introducción-desde-la-exploración-de-información.html","id":"manipulación-de-la-información","chapter":"1 R: Una introducción desde la exploración de información","heading":"1.5 Manipulación de la información","text":"","code":""},{"path":"r-una-introducción-desde-la-exploración-de-información.html","id":"seleccionar-variables","chapter":"1 R: Una introducción desde la exploración de información","heading":"1.5.1 Seleccionar variables","text":"Tareas relacionadas con la preparación y manipulación de datos, que en una hoja de cálculo como Excel de Office o Calc de LibreOffice, son rutinarias y muy sencillas, veces en R pueden significar un dolor de cabeza. obstante, dentro de los paquetes de la familia tidyverse encontramos dplyr. Este paquete brinda herramientas de manipulación de datos basadas en “gramática”, que es otra cosa que funciones (“verbos”) que permiten seleccionar o filtrar elementos en una base de datos, o bien, agrupar y crear nuevas variables.Si deseas profundizar en el conocimiento de este potente paquete consulta la Introducción al paquete dplyr, o bien, su Viñeta de ayuda.La base de datos que cargamos contiene 55 columnas, es decir, 55 variables. Quizá para su análisis te sean de interés todas, por lo que querrías generar una base de datos más compacta mediante la selección de algunas que son de utilidad. Para llevar cabo dicha tarea echaremos mano de la función select(), pero antes de hacerlo, es necesario introducir el operador “tubería”, pipe (%>%).Este operador sirve para indicar cada fase del proceso por el que un objeto es tratado través de la aplicación de diferentes funciones u operaciones. Por ejemplo, queremos que la base covid_zmvm “pase” por un proceso que consiste en la selección de sólo algunas variables. Comencemos usando el “verbo” seleccionar, select(), para una sola variable, por ejemplo pos_hab:La instrucción anterior es equivalente escribir lo siguiente:Así, usar el operador tubería permite sólo ahorrar la escritura de algunos argumentos, sino simplificar la forma en que las instrucciones dadas R son leídas por un ser humano. Veamos cómo seleccionar ahora, por ejemplo, tres variables: la clave de municipio (cvemun), los casos positivos (pos_hab) y el grado de marginación (gm_2020):Ahora, imagina que queremos todas las variables excepto el nombre de la Zona Metropolitana, nom_zm. Sería ocioso colocar todos los nombres de las variables menos el citado. Para hacer esto más eficiente es necesario introducir solamente un signo de menos (-) antes del nombre de la variable, para de esta sencilla forma seleccionar todas las variables menos nom_zm.En lugar de usar los nombres de las variables, puedes recurrir al número de columna en la que se hallan, contando partir del 1. Por ejemplo, nom_mun es la columna 3 y pos_hab es la columna 16, entonces podríamos escribir:Y si es de nuestro interés seleccionar un número consecutivo de columnas, podemos servirnos de:EjercicioPara finalizar lo relacionado con la selección, genera una nueva base de datos llamada covid que contenga las siguientes variables: cvemun, nom_mun, cve_ent, nom_ent, ext, pos_hab, def_hab, ocviv, occu, ppob_1, ppob_1dorm, im, gm_2020, grad, poind, pocom, poss, tmind, tmcom, tmss, rmind, rmcom, rmss, den, pob20.","code":"\ncovid_zmvm %>% dplyr::select(pos_hab)## # A tibble: 76 × 1\n##    pos_hab\n##      <dbl>\n##  1    14.4\n##  2    17.0\n##  3    13.4\n##  4    16.2\n##  5    17.4\n##  6    17.3\n##  7    14.9\n##  8    17.4\n##  9    18.7\n## 10    13.7\n## # … with 66 more rows\ndplyr::select(covid_zmvm,pos_hab)## # A tibble: 76 × 1\n##    pos_hab\n##      <dbl>\n##  1    14.4\n##  2    17.0\n##  3    13.4\n##  4    16.2\n##  5    17.4\n##  6    17.3\n##  7    14.9\n##  8    17.4\n##  9    18.7\n## 10    13.7\n## # … with 66 more rows\ncovid_zmvm %>% dplyr::select(cvemun,pos_hab,gm_2020)## # A tibble: 76 × 3\n##    cvemun pos_hab gm_2020 \n##    <chr>    <dbl> <chr>   \n##  1 09010     14.4 Muy Bajo\n##  2 09012     17.0 Muy Bajo\n##  3 09015     13.4 Muy Bajo\n##  4 09017     16.2 Muy Bajo\n##  5 09011     17.4 Muy Bajo\n##  6 09002     17.3 Muy Bajo\n##  7 09003     14.9 Muy Bajo\n##  8 09013     17.4 Muy Bajo\n##  9 09004     18.7 Muy Bajo\n## 10 09016     13.7 Muy Bajo\n## # … with 66 more rows\ncovid_zmvm %>% dplyr::select(-nom_zm)## # A tibble: 76 × 54\n##    cvemun cve_mun nom_mun     cve_ent nom_ent nom_abr   cvm   ext  pob20 pob20_h\n##    <chr>  <chr>   <chr>       <chr>   <chr>   <chr>   <dbl> <dbl>  <dbl>   <dbl>\n##  1 09010  010     Álvaro Obr… 09      Ciudad… CDMX     9.01  96.2 759137  361007\n##  2 09012  012     Tlalpan     09      Ciudad… CDMX     9.01 310.  699928  334877\n##  3 09015  015     Cuauhtémoc  09      Ciudad… CDMX     9.01  32.5 545884  260951\n##  4 09017  017     Venustiano… 09      Ciudad… CDMX     9.01  33.9 443704  210118\n##  5 09011  011     Tláhuac     09      Ciudad… CDMX     9.01  85.8 392313  190190\n##  6 09002  002     Azcapotzal… 09      Ciudad… CDMX     9.01  33.5 432205  204950\n##  7 09003  003     Coyoacán    09      Ciudad… CDMX     9.01  53.9 614447  289110\n##  8 09013  013     Xochimilco  09      Ciudad… CDMX     9.01 118.  442178  215452\n##  9 09004  004     Cuajimalpa… 09      Ciudad… CDMX     9.01  71.2 217686  104149\n## 10 09016  016     Miguel Hid… 09      Ciudad… CDMX     9.01  46.4 414470  195467\n## # … with 66 more rows, and 44 more variables: pob20_m <dbl>, positivos <dbl>,\n## #   defuncione <dbl>, pos_mil <dbl>, pos_hab <dbl>, def_hab <dbl>, ss <dbl>,\n## #   ppob_sines <dbl>, ppob_basi <dbl>, ppob_media <dbl>, ppob_sup <dbl>,\n## #   ocviv <dbl>, occu <dbl>, pintegra4_ <dbl>, pintegra6_ <dbl>,\n## #   pintegra8_ <dbl>, ppob_5_o_m <dbl>, ppob_3_o_m <dbl>, ppob_1 <dbl>,\n## #   ppob_1dorm <dbl>, ppob_2dorm <dbl>, ppob_3dorm <dbl>, pviv_ocu5_ <dbl>,\n## #   pviv_ocu7_ <dbl>, pviv_ocu9_ <dbl>, analf <dbl>, sbasc <dbl>, vhac <dbl>, …\ncovid_zmvm %>% dplyr::select(3,16)## # A tibble: 76 × 2\n##    nom_mun               pos_hab\n##    <chr>                   <dbl>\n##  1 Álvaro Obregón           14.4\n##  2 Tlalpan                  17.0\n##  3 Cuauhtémoc               13.4\n##  4 Venustiano Carranza      16.2\n##  5 Tláhuac                  17.4\n##  6 Azcapotzalco             17.3\n##  7 Coyoacán                 14.9\n##  8 Xochimilco               17.4\n##  9 Cuajimalpa de Morelos    18.7\n## 10 Miguel Hidalgo           13.7\n## # … with 66 more rows\ncovid_zmvm %>% dplyr::select(1:10)## # A tibble: 76 × 10\n##    cvemun cve_mun nom_mun      cve_ent nom_ent nom_abr nom_zm   cvm   ext  pob20\n##    <chr>  <chr>   <chr>        <chr>   <chr>   <chr>   <chr>  <dbl> <dbl>  <dbl>\n##  1 09010  010     Álvaro Obre… 09      Ciudad… CDMX    Valle…  9.01  96.2 759137\n##  2 09012  012     Tlalpan      09      Ciudad… CDMX    Valle…  9.01 310.  699928\n##  3 09015  015     Cuauhtémoc   09      Ciudad… CDMX    Valle…  9.01  32.5 545884\n##  4 09017  017     Venustiano … 09      Ciudad… CDMX    Valle…  9.01  33.9 443704\n##  5 09011  011     Tláhuac      09      Ciudad… CDMX    Valle…  9.01  85.8 392313\n##  6 09002  002     Azcapotzalco 09      Ciudad… CDMX    Valle…  9.01  33.5 432205\n##  7 09003  003     Coyoacán     09      Ciudad… CDMX    Valle…  9.01  53.9 614447\n##  8 09013  013     Xochimilco   09      Ciudad… CDMX    Valle…  9.01 118.  442178\n##  9 09004  004     Cuajimalpa … 09      Ciudad… CDMX    Valle…  9.01  71.2 217686\n## 10 09016  016     Miguel Hida… 09      Ciudad… CDMX    Valle…  9.01  46.4 414470\n## # … with 66 more rows"},{"path":"r-una-introducción-desde-la-exploración-de-información.html","id":"filtrar-seleccionar-casos","chapter":"1 R: Una introducción desde la exploración de información","heading":"1.5.2 Filtrar (seleccionar casos)","text":"Si ahora lo que te interesa es seleccionar filas o casos en lugar de columnas, hay que echar mano de otro “verbo”, es decir, de la función filtrar, filter(). Por ejemplo, imagina que deseamos seleccionar sólo los municipios del Estado de México. Estos municipios cumplen con la condición de que todos ellos tienen el valor “México” en la variable nom_ent (nombre de entidad), o bien, tener el valor “15” en el de cve_ent (clave de entidad). Para poder hacer un uso eficiente de la función de filtrado es necesario introducir también otro tipo de operadores, los llamados operadores lógicos, que aparecen en el cuadro 1.2:Cuadro 1.2Entonces, para usar la función filter() y tomando como base la información previa:Para hacer una selección de dos entidades, incluiremos dos expresiones en una misma consulta echando mano del operador lógico “o”, identificado con el signo |:EjercicioSelecciona los municipios con una extensión territorial mayor 84 \\(km^2\\).Selecciona los municipios con una extensión territorial mayor 84 \\(km^2\\).Selecciona los municipios con entre 10 y 20 casos positivos por cada mil habitantes.Selecciona los municipios con entre 10 y 20 casos positivos por cada mil habitantes.Selecciona los municipios del Estado de México que tengan más de 10 años promedio de estudio y menos de 10 casos positivos por cada mil habitantes.Selecciona los municipios del Estado de México que tengan más de 10 años promedio de estudio y menos de 10 casos positivos por cada mil habitantes.¿Qué otros filtros relevantes podrías pensar y elaborar?","code":"\ncovid_zmvm %>% dplyr::filter(cve_ent==\"15\")## # A tibble: 59 × 55\n##    cvemun cve_mun nom_mun      cve_ent nom_ent nom_abr nom_zm   cvm   ext  pob20\n##    <chr>  <chr>   <chr>        <chr>   <chr>   <chr>   <chr>  <dbl> <dbl>  <dbl>\n##  1 15002  002     Acolman      15      México  Mex.    Valle…  9.01  83.9 171507\n##  2 15009  009     Amecameca    15      México  Mex.    Valle…  9.01 189.   53441\n##  3 15010  010     Apaxco       15      México  Mex.    Valle…  9.01  75.7  31898\n##  4 15011  011     Atenco       15      México  Mex.    Valle…  9.01  84.6  75489\n##  5 15013  013     Atizapán de… 15      México  Mex.    Valle…  9.01  91.1 523674\n##  6 15015  015     Atlautla     15      México  Mex.    Valle…  9.01 162.   31900\n##  7 15016  016     Axapusco     15      México  Mex.    Valle…  9.01 231.   29128\n##  8 15017  017     Ayapango     15      México  Mex.    Valle…  9.01  36.4  10053\n##  9 15020  020     Coacalco de… 15      México  Mex.    Valle…  9.01  35.1 293444\n## 10 15022  022     Cocotitlán   15      México  Mex.    Valle…  9.01  15.0  15107\n## # … with 49 more rows, and 45 more variables: pob20_h <dbl>, pob20_m <dbl>,\n## #   positivos <dbl>, defuncione <dbl>, pos_mil <dbl>, pos_hab <dbl>,\n## #   def_hab <dbl>, ss <dbl>, ppob_sines <dbl>, ppob_basi <dbl>,\n## #   ppob_media <dbl>, ppob_sup <dbl>, ocviv <dbl>, occu <dbl>,\n## #   pintegra4_ <dbl>, pintegra6_ <dbl>, pintegra8_ <dbl>, ppob_5_o_m <dbl>,\n## #   ppob_3_o_m <dbl>, ppob_1 <dbl>, ppob_1dorm <dbl>, ppob_2dorm <dbl>,\n## #   ppob_3dorm <dbl>, pviv_ocu5_ <dbl>, pviv_ocu7_ <dbl>, pviv_ocu9_ <dbl>, …\n#O bien\ncovid_zmvm %>% dplyr::filter(nom_ent==\"México\")## # A tibble: 59 × 55\n##    cvemun cve_mun nom_mun      cve_ent nom_ent nom_abr nom_zm   cvm   ext  pob20\n##    <chr>  <chr>   <chr>        <chr>   <chr>   <chr>   <chr>  <dbl> <dbl>  <dbl>\n##  1 15002  002     Acolman      15      México  Mex.    Valle…  9.01  83.9 171507\n##  2 15009  009     Amecameca    15      México  Mex.    Valle…  9.01 189.   53441\n##  3 15010  010     Apaxco       15      México  Mex.    Valle…  9.01  75.7  31898\n##  4 15011  011     Atenco       15      México  Mex.    Valle…  9.01  84.6  75489\n##  5 15013  013     Atizapán de… 15      México  Mex.    Valle…  9.01  91.1 523674\n##  6 15015  015     Atlautla     15      México  Mex.    Valle…  9.01 162.   31900\n##  7 15016  016     Axapusco     15      México  Mex.    Valle…  9.01 231.   29128\n##  8 15017  017     Ayapango     15      México  Mex.    Valle…  9.01  36.4  10053\n##  9 15020  020     Coacalco de… 15      México  Mex.    Valle…  9.01  35.1 293444\n## 10 15022  022     Cocotitlán   15      México  Mex.    Valle…  9.01  15.0  15107\n## # … with 49 more rows, and 45 more variables: pob20_h <dbl>, pob20_m <dbl>,\n## #   positivos <dbl>, defuncione <dbl>, pos_mil <dbl>, pos_hab <dbl>,\n## #   def_hab <dbl>, ss <dbl>, ppob_sines <dbl>, ppob_basi <dbl>,\n## #   ppob_media <dbl>, ppob_sup <dbl>, ocviv <dbl>, occu <dbl>,\n## #   pintegra4_ <dbl>, pintegra6_ <dbl>, pintegra8_ <dbl>, ppob_5_o_m <dbl>,\n## #   ppob_3_o_m <dbl>, ppob_1 <dbl>, ppob_1dorm <dbl>, ppob_2dorm <dbl>,\n## #   ppob_3dorm <dbl>, pviv_ocu5_ <dbl>, pviv_ocu7_ <dbl>, pviv_ocu9_ <dbl>, …\ncovid_zmvm %>% dplyr::filter(cve_ent==\"09\"|cve_ent==\"15\")## # A tibble: 75 × 55\n##    cvemun cve_mun nom_mun      cve_ent nom_ent nom_abr nom_zm   cvm   ext  pob20\n##    <chr>  <chr>   <chr>        <chr>   <chr>   <chr>   <chr>  <dbl> <dbl>  <dbl>\n##  1 09010  010     Álvaro Obre… 09      Ciudad… CDMX    Valle…  9.01  96.2 759137\n##  2 09012  012     Tlalpan      09      Ciudad… CDMX    Valle…  9.01 310.  699928\n##  3 09015  015     Cuauhtémoc   09      Ciudad… CDMX    Valle…  9.01  32.5 545884\n##  4 09017  017     Venustiano … 09      Ciudad… CDMX    Valle…  9.01  33.9 443704\n##  5 09011  011     Tláhuac      09      Ciudad… CDMX    Valle…  9.01  85.8 392313\n##  6 09002  002     Azcapotzalco 09      Ciudad… CDMX    Valle…  9.01  33.5 432205\n##  7 09003  003     Coyoacán     09      Ciudad… CDMX    Valle…  9.01  53.9 614447\n##  8 09013  013     Xochimilco   09      Ciudad… CDMX    Valle…  9.01 118.  442178\n##  9 09004  004     Cuajimalpa … 09      Ciudad… CDMX    Valle…  9.01  71.2 217686\n## 10 09016  016     Miguel Hida… 09      Ciudad… CDMX    Valle…  9.01  46.4 414470\n## # … with 65 more rows, and 45 more variables: pob20_h <dbl>, pob20_m <dbl>,\n## #   positivos <dbl>, defuncione <dbl>, pos_mil <dbl>, pos_hab <dbl>,\n## #   def_hab <dbl>, ss <dbl>, ppob_sines <dbl>, ppob_basi <dbl>,\n## #   ppob_media <dbl>, ppob_sup <dbl>, ocviv <dbl>, occu <dbl>,\n## #   pintegra4_ <dbl>, pintegra6_ <dbl>, pintegra8_ <dbl>, ppob_5_o_m <dbl>,\n## #   ppob_3_o_m <dbl>, ppob_1 <dbl>, ppob_1dorm <dbl>, ppob_2dorm <dbl>,\n## #   ppob_3dorm <dbl>, pviv_ocu5_ <dbl>, pviv_ocu7_ <dbl>, pviv_ocu9_ <dbl>, …"},{"path":"r-una-introducción-desde-la-exploración-de-información.html","id":"ordenar","chapter":"1 R: Una introducción desde la exploración de información","heading":"1.5.3 Ordenar","text":"Una operación útil, cuando se analiza información, tiene que ver con ordenar la base de datos con arreglo al valor de una variable. En R con dplyr de tidyverse esto se hace con la función arrange(), por ejemplo:El resultado de la función anterior ordena nuestra base de menor mayor, con base en la clave municipal. Además, es posible incluir varios criterios de ordenación, por ejemplo, si tuvieras los campos año, mes y día podría ordenarse conforme al calendario. En el caso del ejemplo siguiente, primero se ordena con arreglo la clave de entidad y luego con respecto la clave municipal y luego por la extensión territorial por cada mil habitantes:Si deseas ordenar de forma descendente, es decir, de mayor menor hay que introducir una función adicional, desc(), por ejemplo:La función anterior primero ordena los municipios con base en la clave de municipio de forma ascendente (de menor mayor) y simultáneamente coloca de mayor menor los municipios de acuerdo con su extensión territorial.EjerciciosGenera una nueva base de datos (un nuevo objeto) que contenga sólo las alcaldías de la Ciudad de México y las variables casos por cada mil habitantes, luego ordena esa base de datos con arreglo al número de casos positivos de forma ascendente.Genera una nueva base de datos (un nuevo objeto) que contenga sólo las alcaldías de la Ciudad de México y las variables casos por cada mil habitantes, luego ordena esa base de datos con arreglo al número de casos positivos de forma ascendente.lo mismo que en el inciso anterior, pero para los municipios del Estado de México y las defunciones.lo mismo que en el inciso anterior, pero para los municipios del Estado de México y las defunciones.","code":"\ncovid_zmvm %>% dplyr::arrange(cvemun)## # A tibble: 76 × 55\n##    cvemun cve_mun nom_mun      cve_ent nom_ent nom_abr nom_zm   cvm   ext  pob20\n##    <chr>  <chr>   <chr>        <chr>   <chr>   <chr>   <chr>  <dbl> <dbl>  <dbl>\n##  1 09002  002     Azcapotzalco 09      Ciudad… CDMX    Valle…  9.01  33.5 4.32e5\n##  2 09003  003     Coyoacán     09      Ciudad… CDMX    Valle…  9.01  53.9 6.14e5\n##  3 09004  004     Cuajimalpa … 09      Ciudad… CDMX    Valle…  9.01  71.2 2.18e5\n##  4 09005  005     Gustavo A. … 09      Ciudad… CDMX    Valle…  9.01  87.9 1.17e6\n##  5 09006  006     Iztacalco    09      Ciudad… CDMX    Valle…  9.01  23.1 4.05e5\n##  6 09007  007     Iztapalapa   09      Ciudad… CDMX    Valle…  9.01 113.  1.84e6\n##  7 09008  008     La Magdalen… 09      Ciudad… CDMX    Valle…  9.01  63.4 2.48e5\n##  8 09009  009     Milpa Alta   09      Ciudad… CDMX    Valle…  9.01 298.  1.53e5\n##  9 09010  010     Álvaro Obre… 09      Ciudad… CDMX    Valle…  9.01  96.2 7.59e5\n## 10 09011  011     Tláhuac      09      Ciudad… CDMX    Valle…  9.01  85.8 3.92e5\n## # … with 66 more rows, and 45 more variables: pob20_h <dbl>, pob20_m <dbl>,\n## #   positivos <dbl>, defuncione <dbl>, pos_mil <dbl>, pos_hab <dbl>,\n## #   def_hab <dbl>, ss <dbl>, ppob_sines <dbl>, ppob_basi <dbl>,\n## #   ppob_media <dbl>, ppob_sup <dbl>, ocviv <dbl>, occu <dbl>,\n## #   pintegra4_ <dbl>, pintegra6_ <dbl>, pintegra8_ <dbl>, ppob_5_o_m <dbl>,\n## #   ppob_3_o_m <dbl>, ppob_1 <dbl>, ppob_1dorm <dbl>, ppob_2dorm <dbl>,\n## #   ppob_3dorm <dbl>, pviv_ocu5_ <dbl>, pviv_ocu7_ <dbl>, pviv_ocu9_ <dbl>, …\ncovid_zmvm %>% dplyr::arrange(cvemun,ext)## # A tibble: 76 × 55\n##    cvemun cve_mun nom_mun      cve_ent nom_ent nom_abr nom_zm   cvm   ext  pob20\n##    <chr>  <chr>   <chr>        <chr>   <chr>   <chr>   <chr>  <dbl> <dbl>  <dbl>\n##  1 09002  002     Azcapotzalco 09      Ciudad… CDMX    Valle…  9.01  33.5 4.32e5\n##  2 09003  003     Coyoacán     09      Ciudad… CDMX    Valle…  9.01  53.9 6.14e5\n##  3 09004  004     Cuajimalpa … 09      Ciudad… CDMX    Valle…  9.01  71.2 2.18e5\n##  4 09005  005     Gustavo A. … 09      Ciudad… CDMX    Valle…  9.01  87.9 1.17e6\n##  5 09006  006     Iztacalco    09      Ciudad… CDMX    Valle…  9.01  23.1 4.05e5\n##  6 09007  007     Iztapalapa   09      Ciudad… CDMX    Valle…  9.01 113.  1.84e6\n##  7 09008  008     La Magdalen… 09      Ciudad… CDMX    Valle…  9.01  63.4 2.48e5\n##  8 09009  009     Milpa Alta   09      Ciudad… CDMX    Valle…  9.01 298.  1.53e5\n##  9 09010  010     Álvaro Obre… 09      Ciudad… CDMX    Valle…  9.01  96.2 7.59e5\n## 10 09011  011     Tláhuac      09      Ciudad… CDMX    Valle…  9.01  85.8 3.92e5\n## # … with 66 more rows, and 45 more variables: pob20_h <dbl>, pob20_m <dbl>,\n## #   positivos <dbl>, defuncione <dbl>, pos_mil <dbl>, pos_hab <dbl>,\n## #   def_hab <dbl>, ss <dbl>, ppob_sines <dbl>, ppob_basi <dbl>,\n## #   ppob_media <dbl>, ppob_sup <dbl>, ocviv <dbl>, occu <dbl>,\n## #   pintegra4_ <dbl>, pintegra6_ <dbl>, pintegra8_ <dbl>, ppob_5_o_m <dbl>,\n## #   ppob_3_o_m <dbl>, ppob_1 <dbl>, ppob_1dorm <dbl>, ppob_2dorm <dbl>,\n## #   ppob_3dorm <dbl>, pviv_ocu5_ <dbl>, pviv_ocu7_ <dbl>, pviv_ocu9_ <dbl>, …\ncovid_zmvm %>% dplyr::arrange(cvemun,desc(ext))## # A tibble: 76 × 55\n##    cvemun cve_mun nom_mun      cve_ent nom_ent nom_abr nom_zm   cvm   ext  pob20\n##    <chr>  <chr>   <chr>        <chr>   <chr>   <chr>   <chr>  <dbl> <dbl>  <dbl>\n##  1 09002  002     Azcapotzalco 09      Ciudad… CDMX    Valle…  9.01  33.5 4.32e5\n##  2 09003  003     Coyoacán     09      Ciudad… CDMX    Valle…  9.01  53.9 6.14e5\n##  3 09004  004     Cuajimalpa … 09      Ciudad… CDMX    Valle…  9.01  71.2 2.18e5\n##  4 09005  005     Gustavo A. … 09      Ciudad… CDMX    Valle…  9.01  87.9 1.17e6\n##  5 09006  006     Iztacalco    09      Ciudad… CDMX    Valle…  9.01  23.1 4.05e5\n##  6 09007  007     Iztapalapa   09      Ciudad… CDMX    Valle…  9.01 113.  1.84e6\n##  7 09008  008     La Magdalen… 09      Ciudad… CDMX    Valle…  9.01  63.4 2.48e5\n##  8 09009  009     Milpa Alta   09      Ciudad… CDMX    Valle…  9.01 298.  1.53e5\n##  9 09010  010     Álvaro Obre… 09      Ciudad… CDMX    Valle…  9.01  96.2 7.59e5\n## 10 09011  011     Tláhuac      09      Ciudad… CDMX    Valle…  9.01  85.8 3.92e5\n## # … with 66 more rows, and 45 more variables: pob20_h <dbl>, pob20_m <dbl>,\n## #   positivos <dbl>, defuncione <dbl>, pos_mil <dbl>, pos_hab <dbl>,\n## #   def_hab <dbl>, ss <dbl>, ppob_sines <dbl>, ppob_basi <dbl>,\n## #   ppob_media <dbl>, ppob_sup <dbl>, ocviv <dbl>, occu <dbl>,\n## #   pintegra4_ <dbl>, pintegra6_ <dbl>, pintegra8_ <dbl>, ppob_5_o_m <dbl>,\n## #   ppob_3_o_m <dbl>, ppob_1 <dbl>, ppob_1dorm <dbl>, ppob_2dorm <dbl>,\n## #   ppob_3dorm <dbl>, pviv_ocu5_ <dbl>, pviv_ocu7_ <dbl>, pviv_ocu9_ <dbl>, …"},{"path":"r-una-introducción-desde-la-exploración-de-información.html","id":"crear-nuevas-variables","chapter":"1 R: Una introducción desde la exploración de información","heading":"1.5.4 Crear nuevas variables","text":"Para añadir una nueva variable partir de las existentes recurrimos la función mutate(). Por ejemplo, calculemos la variable densidad de casos positivos, es decir, número de casos positivos dividido entre la extensión territorial, dicha variable la llamaremos pos_den. Pero antes, generemos una nueva base de datos que sólo contenga algunas de las variables de la base original:Notarás como la nueva variable aparece al final de la base. Vamos intentar unir varios de los elementos que hemos aprendido hasta este punto para que veas el potencial de uso de la tubería. Vamos crear una nueva variable, la misma que hace un momento, luego, tomaremos la base que contiene la nueva variable y construiremos con ella un diagrama de dispersión con la nueva variable y el número de defunciones por cada mil habitantes:¿Cómo explicarías la relación entre la variable creada, densidad de casos positivos, y las defunciones por cada mil habitables?Ejercicio¿Cómo añadirías más de una nueva variable tu base original?¿Cómo añadirías más de una nueva variable tu base original?Construye la variable “densidad de defunciones” y grafícala en un diagrama de dispersión con la densidad de población? Usa las cañerías.Construye la variable “densidad de defunciones” y grafícala en un diagrama de dispersión con la densidad de población? Usa las cañerías.Quizá lo que te interese sea sólo quedarte con algunas de las variables originales y las nuevas variables creadas partir de la información de la variable original. Para ello es útil la función transmute():El segmento de código anterior genera una nueva base en la que sólo conservamos algunas de las variables originales y añadimos dos nuevas partir de la información original.","code":"\ncovid_zmvm %>% dplyr::select(cvemun,nom_mun,positivos,pos_hab,ext) %>%\n  dplyr::mutate(pos_den=positivos/ext)## # A tibble: 76 × 6\n##    cvemun nom_mun               positivos pos_hab   ext pos_den\n##    <chr>  <chr>                     <dbl>   <dbl> <dbl>   <dbl>\n##  1 09010  Álvaro Obregón            10905    14.4  96.2   113. \n##  2 09012  Tlalpan                   11887    17.0 310.     38.3\n##  3 09015  Cuauhtémoc                 7289    13.4  32.5   224. \n##  4 09017  Venustiano Carranza        7172    16.2  33.9   212. \n##  5 09011  Tláhuac                    6812    17.4  85.8    79.4\n##  6 09002  Azcapotzalco               7483    17.3  33.5   223. \n##  7 09003  Coyoacán                   9182    14.9  53.9   170. \n##  8 09013  Xochimilco                 7696    17.4 118.     65.1\n##  9 09004  Cuajimalpa de Morelos      4071    18.7  71.2    57.2\n## 10 09016  Miguel Hidalgo             5669    13.7  46.4   122. \n## # … with 66 more rows\ncovid_zmvm %>% \n  dplyr::mutate(pos_den=positivos/ext) %>% \n  ggplot2::ggplot()+\n    ggplot2::geom_point(aes(x=pos_den,y=def_hab))+\n    ggplot2::geom_smooth(aes(x=pos_den,y=def_hab))+\n    ggplot2::labs(x=\"Densidad de casos positivos\",y=\"Defunciones por cada mil habitantes\")\ncovid_zmvm %>% \n  dplyr::transmute(cvemun,nom_mun,pos_hab,def_hab,pos_den=positivos/ext,def_den=defuncione/ext)## # A tibble: 76 × 6\n##    cvemun nom_mun               pos_hab def_hab pos_den def_den\n##    <chr>  <chr>                   <dbl>   <dbl>   <dbl>   <dbl>\n##  1 09010  Álvaro Obregón           14.4   1.14    113.     9.03\n##  2 09012  Tlalpan                  17.0   0.774    38.3    1.75\n##  3 09015  Cuauhtémoc               13.4   1.38    224.    23.2 \n##  4 09017  Venustiano Carranza      16.2   1.32    212.    17.3 \n##  5 09011  Tláhuac                  17.4   0.737    79.4    3.37\n##  6 09002  Azcapotzalco             17.3   1.65    223.    21.3 \n##  7 09003  Coyoacán                 14.9   1.05    170.    12.0 \n##  8 09013  Xochimilco               17.4   0.898    65.1    3.36\n##  9 09004  Cuajimalpa de Morelos    18.7   0.873    57.2    2.67\n## 10 09016  Miguel Hidalgo           13.7   0.943   122.     8.43\n## # … with 66 more rows"},{"path":"r-una-introducción-desde-la-exploración-de-información.html","id":"resúmenes-de-información-y-grupos","chapter":"1 R: Una introducción desde la exploración de información","heading":"1.5.5 Resúmenes de información y grupos","text":"Quizá una de las funciones más potentes y sencillas que tiene dplyr es la función de resumen (summarise()). Veamos cómo opera. Imagina que deseas un promedio del número de casos que terminaron en muerte:Esto es particularmente útil si se le compara con la función del paquete base de R, summary(), pero si la combinamos con la función de agrupamiento, group_by() la situación cambia. Imagina que queremos el promedio de casos positivos por cada mil habitantes para cada conjunto de municipios de las tres entidades que componen el Valle de México:El en segmento de código anterior primero se agrupa la información con arreglo al criterio de clave de entidad, cve_ent, y luego, para cada grupo, calcula el resultado especificado: un promedio. Dentro de la función de resumen, summarise(), se puede llevar cabo sólo múltiples operaciones sino que estas pueden ser de diferente naturaleza, incluso por ejemplo una suma o una cuenta:En el segmento de código anterior creamos tres variables de resumen: la población total, pob_tot, que es la suma de la población para cada entidad, el promedio del índice de marginación, im_medio y el número de municipios de cada entidad través de una cuenta con la función n().EjercicioConstruye una gráfica de barras donde aparezca el total de población para cada entidad, partir del segmento código anterior.Construye una gráfica de barras donde aparezca el total de población para cada entidad, partir del segmento código anterior.¿Es posible agrupar la información con arreglo otra variable? Construye algunas medidas de resumen con esos grupos y gráficalos.¿Es posible agrupar la información con arreglo otra variable? Construye algunas medidas de resumen con esos grupos y gráficalos.Estas y otras tantas funciones son desarrolladas con todo detalle y de forma muy amena en el citado libro de Wickham y Grolemund, R data science, por lo que su estudio se recomienda ampliamente.En el siguiente capítulo continuamos con la exploración de la información, pero de un tipo particular de información: la información espacial.","code":"\ncovid_zmvm %>%\n  dplyr::summarise(promedio_def=mean(def_hab, na.rm=TRUE))## # A tibble: 1 × 1\n##   promedio_def\n##          <dbl>\n## 1        0.683\ncovid_zmvm %>%\n  dplyr::group_by(cve_ent) %>% \n  summarise(promedio_def=mean(def_hab, na.rm=TRUE), promedio_pos=mean(pos_hab))## # A tibble: 3 × 3\n##   cve_ent promedio_def promedio_pos\n##   <chr>          <dbl>        <dbl>\n## 1 09             1.08         15.8 \n## 2 13             0.790         5.88\n## 3 15             0.572         4.57\ncovid_zmvm %>% \n  dplyr::group_by(cve_ent) %>%\n  dplyr::summarise(pob_tot=sum(pob20),im_medio=mean(im),tot_mun=n())## # A tibble: 3 × 4\n##   cve_ent  pob_tot im_medio tot_mun\n##   <chr>      <dbl>    <dbl>   <int>\n## 1 09       9209944     60.1      16\n## 2 13        168302     59.4       1\n## 3 15      12426269     58.0      59"}]
